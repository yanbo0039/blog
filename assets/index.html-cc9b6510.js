const R=JSON.parse(`{"key":"v-3d95c4fe","path":"/zh/bank5/","title":"超级短线交易","lang":"zh-CN","frontmatter":{"title":"超级短线交易","icon":"page","order":5,"author":"涎涎","date":"2022-03-28T17:42:41.000Z","isOriginal":true,"permalinkPattern":"bank5","category":["bank"],"tag":["bank"],"head":[["meta",{"name":"keywords","content":"超级短线交易"}],["meta",{"property":"og:url","content":"https://yanbo0039.github.io/blog/blog/zh/bank5/"}],["meta",{"property":"og:site_name","content":"涎涎的博客"}],["meta",{"property":"og:title","content":"超级短线交易"}],["meta",{"property":"og:description","content":"超级短线交易.md 源码 DRAWKLINE(H,O,L,C); ZKP:=IF(C&gt;REF(C,1),REF(C,1),DRAWNULL); ZSP:=IF(C&gt;REF(C,1),C,DRAWNULL); DKP:=IF(C&lt;=REF(C,1),REF(C,1),DRAWNULL); DSP:=IF(C&lt;=REF(C,1),C,DRAWNULL); DRAWKLINE(H,DKP,L,DSP); STICKLINE(C&lt;=REF(C,1),DKP,DSP,3.05,0),COLORBLUE; STICKLINE(C&lt;=REF(C,1),DKP,DSP,2.2,0),COLORFF7700; STICKLINE(C&lt;=REF(C,1),DKP,DSP,1.5,0),COLORFF9900; STICKLINE(C&lt;=REF(C,1),DKP,DSP,0.5,0),COLORFFBB00; DRAWKLINE(H,ZKP,L,ZSP); STICKLINE(C&gt;REF(C,1),ZKP,ZSP,3.05,0),COLOR000099; STICKLINE(C&gt;REF(C,1),ZKP,ZSP,2.2,0),COLOR0000CC; STICKLINE(C&gt;REF(C,1),ZKP,ZSP,1.5,0),COLOR0000FF; STICKLINE(C&gt;REF(C,1),ZKP,ZSP,0.5,0),COLORCC66FF; STICKLINE(V/REF(V,1)&gt;2 AND CLOSE&gt;=OPEN,ZKP,ZSP,1,0),COLORYELLOW; VAR111:=ZIG(3,13); STICKLINE((REF(VAR111,2) &lt; REF(VAR111,1)) AND (VAR111 &lt; REF(VAR111,1)),CLOSE,OPEN,3,0),COLOR66FF00; DRAWTEXT_FIX(STICKLINE((REF(VAR111,2) &lt; REF(VAR111,1)) AND (VAR111 &lt; REF(VAR111,1)),CLOSE,OPEN,5,0),0.00,0.11,0,''),COLOR00FF00,LINETHICK1; MA5:MA(C,5)LINETHICK3,COLOR00CCFF; MA10:=MA(C,10); MA20:=MA(C,20); MA30:=MA(C,30); TY:=C; A1:=REF(TY,10)=HHV(TY,2*10+1); B1:=FILTER(A1,10); C1:=BACKSET(B1,10+1); HD:=FILTER(C1,10); A2:=REF(TY,10)=LLV(TY,2*10+1); B2:=FILTER(A2,10); C2:=BACKSET(B2,10+1); LD:=FILTER(C2,10); 前期高位:REF(C,BARSLAST(HD)),COLOR8000FF,POINTDOT; STICKLINE(C,前期高位,前期高位,8,0),COLOR8000FF; JRH:=HHV(C,2); JRL:=LLV(C,2); VAR01:=(CLOSE&gt;REF(CLOSE,1) AND CLOSE&gt;REF(CLOSE,2)); VAR02:=(REF(VAR01,1) AND CLOSE&lt;=REF(CLOSE,1) AND CLOSE&gt;=REF(CLOSE,2)); VAR03:=(REF(VAR02,1) AND CLOSE&gt;=REF(CLOSE,1) AND CLOSE&lt;=REF(CLOSE,2)); VAR04:=(REF(VAR03,1) AND CLOSE&lt;=REF(CLOSE,1) AND CLOSE&gt;=REF(CLOSE,2)); VAR05:=(REF(VAR04,1) AND CLOSE&gt;=REF(CLOSE,1) AND CLOSE&lt;=REF(CLOSE,2)); VAR06:=(REF(VAR05,1) AND CLOSE&lt;=REF(CLOSE,1) AND CLOSE&gt;=REF(CLOSE,2)); VAR07:=(REF(VAR06,1) AND CLOSE&gt;=REF(CLOSE,1) AND CLOSE&lt;=REF(CLOSE,2)); VAR08:=(REF(VAR07,1) AND CLOSE&lt;=REF(CLOSE,1) AND CLOSE&gt;=REF(CLOSE,2)); VAR09:=(REF(VAR08,1) AND CLOSE&gt;=REF(CLOSE,1) AND CLOSE&lt;=REF(CLOSE,2)); VARA:=(REF(VAR09,1) AND CLOSE&lt;=REF(CLOSE,1) AND CLOSE&gt;=REF(CLOSE,2)); VARB:=(REF(VARA,1) AND CLOSE&gt;=REF(CLOSE,1) AND CLOSE&lt;=REF(CLOSE,2)); VARC:=(REF(VARB,1) AND CLOSE&lt;=REF(CLOSE,1) AND CLOSE&gt;=REF(CLOSE,2)); VARD:=(CLOSE&lt;REF(CLOSE,1) AND CLOSE&lt;REF(CLOSE,2)); VARE:=(REF(VARD,1) AND CLOSE&gt;=REF(CLOSE,1) AND CLOSE&lt;=REF(CLOSE,2)); VARF:=(REF(VARE,1) AND CLOSE&lt;=REF(CLOSE,1) AND CLOSE&gt;=REF(CLOSE,2)); VAR010:=(REF(VARF,1) AND CLOSE&gt;=REF(CLOSE,1) AND CLOSE&lt;=REF(CLOSE,2)); VAR011:=(REF(VAR010,1) AND CLOSE&lt;=REF(CLOSE,1) AND CLOSE&gt;=REF(CLOSE,2)); VAR012:=(REF(VAR011,1) AND CLOSE&gt;=REF(CLOSE,1) AND CLOSE&lt;=REF(CLOSE,2)); VAR013:=(REF(VAR012,1) AND CLOSE&lt;=REF(CLOSE,1) AND CLOSE&gt;=REF(CLOSE,2)); VAR014:=(REF(VAR013,1) AND CLOSE&gt;=REF(CLOSE,1) AND CLOSE&lt;=REF(CLOSE,2)); VAR015:=(REF(VAR014,1) AND CLOSE&lt;=REF(CLOSE,1) AND CLOSE&gt;=REF(CLOSE,2)); VAR016:=(REF(VAR015,1) AND CLOSE&gt;=REF(CLOSE,1) AND CLOSE&lt;=REF(CLOSE,2)); VAR017:=(REF(VAR016,1) AND CLOSE&lt;=REF(CLOSE,1) AND CLOSE&gt;=REF(CLOSE,2)); VAR018:=(REF(VAR017,1) AND CLOSE&gt;=REF(CLOSE,1) AND CLOSE&lt;=REF(CLOSE,2)); VAR019:=((REF(VARD OR VARE OR VARF OR VAR010 OR VAR011 OR VAR012 OR VAR013 OR VAR014 OR VAR015 OR VAR016 OR VAR017 OR VAR018,1)) AND VAR01); VAR1A:=((REF(VAR01 OR VAR02 OR VAR03 OR VAR04 OR VAR05 OR VAR06 OR VAR07 OR VAR08 OR VAR09 OR VARA OR VARB OR VARC,1)) AND VARD); 红色持股:=VAR01 OR VAR02 OR VAR03 OR VAR04 OR VAR05 OR VAR06 OR VAR07 OR VAR08 OR VAR09 OR VARA OR VARB OR VARC,COLOR0000FF,NODRAW; 离场:=IF(红色持股,JRL,DRAWNULL); 明离场价:=离场,COLORFF99FF,NODRAW; 青色观望:=VARD OR VARE OR VARF OR VAR010 OR VAR011 OR VAR012 OR VAR013 OR VAR014 OR VAR015 OR VAR016 OR VAR017 OR VAR018,COLORFFFF00,NODRAW; 进:=IF(青色观望,JRH,DRAWNULL); 今离场价:REF(离场,1),COLOR0000FF,NODRAW; 明进场价:=进,COLOR33AACC,NODRAW; 今进场价:REF(明进场价,1),COLORGREEN,NODRAW; 上涨家数:INDEXADV,COLOR0080FF,NODRAW; 下跌家数:INDEXDEC,COLORGREEN,NODRAW; 五日乖离率:=(C-MA5)/MA5*100; BB5:=ATAN((MA5/REF(MA5,1)-1)*100)*180/3.1416; 速度5:=SMA(EMA((MA5-REF(MA5,1))/REF(MA5,1),3)*100,3,1); 加速度5:=EMA((速度5-REF(速度5,1)),3),NODRAW; IF(BB5&gt;30 AND MA5&gt;REF(MA5,1), MA5,DRAWNULL),LINETHICK3,COLORRED; BB10:=ATAN((MA10/REF(MA10,1)-1)*100)*180/3.1416; IF(BB5&lt;0 AND MA5&lt;REF(MA5,1), MA5,DRAWNULL),LINETHICK3,COLORGREEN; 三拾日乖离率:=(C-MA30)/MA30*100,NODRAW; VAR1:=(MA20-MA30)&gt;REF((MA20-MA30),1) AND MA20&gt;REF(MA20,1) AND MA30&gt;REF(MA30,1); VAR2:=(MA30-MA20)&lt;REF((MA30-MA20),1) AND MA20&lt;REF(MA20,1) AND MA30&lt;REF(MA30,1); BB30:=ATAN((MA30/REF(MA30,1)-1)*100)*180/3.1416; 强势狙击:=FILTER(BB30&gt;30 AND BB10&gt;45 AND CROSS(BB5,60),10); 加仓:=FILTER(COUNT(CROSS(BB5,30),5)&gt;=1 AND MA5&gt;REF(MA5,1) AND 三拾日乖离率&gt;REF(三拾日乖离率,1) AND MA10&gt;REF(MA10,1) AND 加速度5&gt;REF(加速度5,1) AND 速度5&gt;REF(速度5,1),10); 清仓:=FILTER(COUNT(CROSS(30,BB5),5)&gt;=1 AND (C&gt;MA30 OR O&gt;MA30) AND MA5&lt;REF(MA5,1) AND 三拾日乖离率&lt;REF(三拾日乖离率,1) AND MA10&lt;REF(MA10,1),10); DRAWTEXT(加仓 ,LOW*0.96,'加'),COLORYELLOW; JC:=CROSS(0,五日乖离率) AND 三拾日乖离率&lt;REF(三拾日乖离率,1) AND MA10&gt;REF(MA10,1) ; 减仓:=FILTER(JC,10); MR:=COUNT(CROSS(五日乖离率,0),3)&gt;=1 AND 三拾日乖离率&gt;REF(三拾日乖离率,1) AND MA5&gt;REF(MA5,1) AND (C/REF(C,1)-1)*100&gt;5 AND REF(C,1)&lt;MA30; 买入:=FILTER(MR,10); DRAWTEXT(减仓,HIGH*1.01,'←风险'),COLORCYAN; DRAWTEXT(买入,LOW*0.99,'买'),COLORYELLOW; DRAWTEXT(清仓 ,HIGH*1.02,'←清仓'),COLORGREEN; DRAWTEXT(强势狙击,LOW*0.98,'←狙击'),COLORWHITE; VAR21:=MAX(ABS(HIGH-AMOUNT/VOL/100),ABS(AMOUNT/VOL/100-LOW)); VAR3:=ABS((OPEN+CLOSE)/2-AMOUNT/VOL/100); MV:=(VAR21+VAR3)/AMOUNT*VOL*100*50; 压力:MA(REF(HHV(C,30),1),2),COLORABFF46; 支撑:MA(REF(LLV(C,30),1),2),COLOR9DFFFF; 总额:=AMOUNT; 买:=IF(O=C AND (C-REF(C,1))/REF(C,1)*100&gt;9.8,AMOUNT,AMOUNT/((H-L)*2-ABS(O-C))*(C-L)); 买%:=买/AMOUNT*100; 流入:=AMOUNT*买%/10000000000; 流出:=AMOUNT/100000000-流入; 净流:=(流入-流出); 总额3:=SUM(AMOUNT,3); 流入3:=SUM(流入,3); 流出3:=SUM(流出,3); 净流3:=SUM(流入-流出,3); 总额5:=SUM(AMOUNT,5); 流入5:=SUM(流入,5); 流出5:=SUM(流出,5); 净流5:=SUM(流入-流出,5); 总额10:=SUM(AMOUNT,10); 流入10:=SUM(流入,10); 流出10:=SUM(流出,10); 净流10:=SUM(流入-流出,10); 画:=CONST(FINDHIGH(总额10,0,190,1)); DRAWTEXT_FIX(1,0.00,0,0,'所属行业：')COLOR00FFFF; DRAWTEXT_FIX(1,0.06,0,0,HYBLOCK)COLOR00FFFF; DRAWTEXT_FIX(1,0.14,0,0,'所属地区：')COLOR00FFFF; DRAWTEXT_FIX(1,0.20,0,0,DYBLOCK)COLOR00FFFF; DRAWTEXT_FIX(1,0.30,0.00,0,'主题投资：')COLOR00FFFF; DRAWTEXT_FIX(1,0.36,0.00,0,EXTERNSTR(0,2))COLOR00FFFF; DRAWTEXT_FIX(1,0.00,0.05,0,'主营业务：')COLOR00FFFF; DRAWTEXT_FIX(1,0.06,0.05,0,EXTERNSTR(0,3))COLOR00FFFF; DRAWTEXT_FIX(1,0.00,0.10,0,'解禁日期：')COLOR00FFFF; DRAWTEXT_FIX(1,0.06,0.10,0,EXTERNSTR(0,4))COLOR00FFFF; DRAWTEXT_FIX(1,0.00,0.15,0,'莸利比例:'),COLORYELLOW; DRAWNUMBER_FIX(1,0.06,0.15,0,CONST(WINNER(C )*100)),COLOR0080FF; DRAWTEXT_FIX(1,0.12,0.15,0,'动态PE:'),COLORYELLOW; DRAWNUMBER_FIX(1,0.17,0.15,0,CONST(DYNAINFO(39))),COLOR0080FF; DRAWTEXT_FIX(1,0.22,0.15,0,'市值:'),COLORYELLOW; DRAWNUMBER_FIX(1,0.26,0.15,0,FINANCE(40)/100000000),COLOR0080FF; DRAWTEXT_FIX (1,0.31,0.15,0,'公积金(股):'),COLORYELLOW; DRAWNUMBER_FIX(1,0.38,0.15,0,FINANCE(18)),COLOR0080FF; DRAWTEXT_FIX (1,0.43,0.15,0,'收益:'),COLORYELLOW; DRAWNUMBER_FIX(1,0.47,0.15,0,FINANCE(33)),COLOR0080FF; DRAWTEXT_FIX(1,0.00,0.19,0,'净流入(亿):'),COLORYELLOW; DRAWTEXT_FIX(1,0.06,0.19,0,'1日'),COLORYELLOW; DRAWTEXT_FIX(1,0.12,0.19,0,'3日'),COLORYELLOW; DRAWTEXT_FIX(1,0.18,0.19,0,'5日'),COLORYELLOW; DRAWTEXT_FIX(1,0.24,0.19,0,'10日'),COLORYELLOW; DRAWNUMBER_FIX(1,0.08,0.19,0,CONST((净流))),COLOR0080FF; DRAWNUMBER_FIX(1,0.14,0.19,0,CONST((净流3))),COLOR0080FF; DRAWNUMBER_FIX(1,0.20,0.19,0,CONST((净流5))),COLOR0080FF; DRAWNUMBER_FIX(1,0.265,0.19,0,CONST((净流10))),COLOR0080FF; DRAWTEXT_FIX(1,0.00,0.23,0,'愚民导向：'),COLOR00FFFF; DRAWTEXT_FIX(1,0.06,0.23,0,EXTERNSTR(0,5)),COLOR00FFFF; DRAWRECTREL(0,500,147,999.4,IF(120,RGB(10,0,0),0)); 超B:=L2_AMO(0,2)/10000.0; 大B:=L2_AMO(1,2)/10000.0; 中B:=L2_AMO(2,2)/10000.0; 小B:=L2_AMO(3,2)/10000.0; 超S:=L2_AMO(0,3)/10000.0; 大S:=L2_AMO(1,3)/10000.0; 中S:=L2_AMO(2,3)/10000.0; 小S:=L2_AMO(3,3)/10000.0; TESTSKIP(NOT(超B OR 大B OR 中B OR 小B OR 超S OR 大S OR 中S OR 小S)!=0); 大宗进:=(超B)+(大B),NODRAW; 大宗出:=(超S)+(大S),NODRAW; 非大宗进:=(中B)+(小B),NODRAW; 非大宗出:=(中S)+(小S),NODRAW; 大宗进限制:=IF((超B+大B)=0,0,大宗进); 大宗出限制:=IF((超S+大S)=0,0,大宗出); 非大宗进限制:=IF(中B+小B=0,0,非大宗进); 非大宗出限制:=IF(中S+小S=0,0,非大宗出); 主力净流入:=(超B+大B)-(超S+大S),COLORRED,NODRAW; 散户净流入:=(中B+小B)-(中S+小S),COLORRED,NODRAW; 净流入:=(超B+大B+中B+小B)-(超S+大S+中S+小S),COLORRED,NODRAW; 大单流入:=(超B+大B)/(超B+大B+超S+大S)*100,NODRAW; 大单流入限制:=IF((超B+大B+超S+大S)=0,0,大单流入); 大单流出比:=(超S+大S)/(超B+大B+超S+大S)*100,NODRAW; 大单流出限制:=IF((超B+大B+超S+大S)=0,0,大单流出比); 总流入比:=(超B+大B+中B+小B)/(超B+大B+中B+小B+超S+大S+中S+小S)*100,NODRAW; 总流出比:=(超S+大S+中S+小S)/(超B+大B+中B+小B+超S+大S+中S+小S)*100,NODRAW; 成交总量:=(超B+大B+中B+小B+超S+大S+中S+小S),NODRAW; 机构参与度:=(超B+超S+大B+大S)/成交总量*100,COLORYELLOW,NODRAW; 大单强度:=(超B+大B-超S-大S)/成交总量*100,COLORYELLOW,NODRAW; 大单强度限制:=IF(大单强度=0,-100,大单强度); 大单强度比:=IF(大单强度&gt;=0,(大单强度限制+100)/2,100-ABS((大单强度限制-100)/2)),NODRAW; 超单强度:=(超B-超S)/(超B+超S)*100,COLORYELLOW,NODRAW; 超单强度限制:=IF(超单强度=0,-100,超单强度); 超单强度比:=IF(超单强度&gt;0,(超单强度限制+100)/2,IF(超单强度&lt;0,100-ABS((超单强度限制-100)/2),0)),NODRAW; DAZHIV:=CONST(MAX(ABS(大宗进),MAX(ABS(大宗出),MAX(ABS(非大宗进),ABS(非大宗出))))),NODRAW; DRAWRECTREL(0,CONST(930-(ABS(大宗进)*250/DAZHIV)),35,950,IF(CONST(大宗进&gt;0),RGB(255,0,0),RGB(23,125,255))); DRAWRECTREL(37,CONST(930-(ABS(大宗出)*250/DAZHIV)),72,950,IF(CONST(大宗出&gt;0),RGB(23,125,255),RGB(255,0,0))); DRAWRECTREL(75,CONST(930-(ABS(非大宗进)*250/DAZHIV)),110,950,IF(CONST(非大宗进&gt;0),RGB(255,0,0),RGB(23,125,255))); DRAWRECTREL(112,CONST(930-(ABS(非大宗出)*250/DAZHIV)),147,950,IF(CONST(非大宗出&gt;0),RGB(23,125,255),RGB(255,0,0))); DRAWRECTREL(150,CONST(940-(ABS(净流入)*250/DAZHIV))-20,190,950,IF(CONST(净流入&gt;0),RGB(200,0,0),RGB(0,125,50))); DRAWTEXT_FIX(CURRBARSCOUNT=1,0.0001,0.9,0,STRCAT('',CON2STR(大宗进/1,0))),COLORYELLOW; DRAWTEXT_FIX(CURRBARSCOUNT=1,0.036,0.9,0,STRCAT('',CON2STR(大宗出/1,0))),COLORYELLOW; DRAWTEXT_FIX(CURRBARSCOUNT=1,0.074,0.9,0,STRCAT('',CON2STR(非大宗进/1,0))),COLORYELLOW; DRAWTEXT_FIX(CURRBARSCOUNT=1,0.111,0.9,0,STRCAT('',CON2STR(非大宗出/1,0))),COLORYELLOW; DRAWTEXT_FIX(CURRBARSCOUNT=1,0.150,0.9,0,STRCAT('',CON2STR(净流入/1,0))),COLORYELLOW; DRAWTEXT_FIX(1,0.000,0.99,0,STRCAT(STRCAT('主力 ',CON2STR(主力净流入,0)),'万')),COLORMAGENTA; DRAWTEXT_FIX(1,0.078,0.99,0,STRCAT(STRCAT('散户 ',CON2STR(散户净流入,0)),'万')),COLORCYAN; DRAWTEXT_FIX(CURRBARSCOUNT=1,0.145,0.99,0,'净流入:(万)'),COLORYELLOW; 主力买力度:=LARGEINTRDVOL*1000/VOL; 主力卖力度:=LARGEOUTTRDVOL*1000/VOL; AAD:=CONST(MAX(ABS(主力买力度),ABS(主力卖力度)))*4,NODRAW; DRAWRECTREL(0,515,CONST(ABS(主力买力度)*560/AAD),568,IF(CONST(主力买力度)&gt;0,RGB(255,0,0),RGB(0,50,0))); DRAWRECTREL(0,570,CONST(ABS(主力卖力度)*560/AAD),623,IF(CONST(主力卖力度)&gt;0,RGB(0,50,0),RGB(255,0,0))); DRAWTEXT_FIX(1,0,0.524,0,STRCAT('主买力度:',CON2STR(主力买力度,0))),COLORYELLOW; DRAWTEXT_FIX(1,0,0.576,0,STRCAT('主卖力度:',CON2STR(主力卖力度,0))),COLORYELLOW; {DDE显示} DDX:=(LARGEINTRDVOL-LARGEOUTTRDVOL)*1000/FINANCE(7); DDY:=IF(TRADENUM&gt;0,(TRADEOUTNUM-TRADEINNUM)*100/TRADENUM,0); DDZ:=IF(TRADENUM&gt;0,(LARGETRDINNUM-LARGETRDOUTNUM)/TRADENUM*100,0); DRAWRECTREL(150,500,192,540,IF(CONST(DDX)&gt;0,RGB(255,0,0),RGB(0,50,0))); DRAWRECTREL(150,545,192,585,IF(CONST(DDY)&gt;0,RGB(255,0,0),RGB(0,50,0))); DRAWRECTREL(150,590,192,630,IF(CONST(DDZ)&gt;0,RGB(255,0,0),RGB(0,50,0))); DRAWTEXT_FIX(1,0.153,0.500,0,STRCAT('DDX:',CON2STR(DDX,1))),COLORYELLOW,COLORWHITE; DRAWTEXT_FIX(1,0.153,0.548,0,STRCAT('DDY:',CON2STR(DDY,1))),COLORYELLOW,COLORWHITE; DRAWTEXT_FIX(1,0.153,0.596,0,STRCAT('DDZ:',CON2STR(DDZ,1))),COLORYELLOW,COLORWHITE; T1:=IF (DDX&gt;0 AND REF(DDX,1)&lt;0,1,0); T2:=IF (DDX&gt;0 AND REF(DDX,1)&gt;0 AND REF(DDX,2)&lt;0,2,T1); T3:=IF (DDX&gt;0 AND REF(DDX,1)&gt;0 AND REF(DDX,2)&gt;0 AND REF(DDX,3)&lt;0,3,T2); T4:=IF (DDX&gt;0 AND REF(DDX,1)&gt;0 AND REF(DDX,2)&gt;0 AND REF(DDX,3)&gt;0 AND REF(DDX,4)&lt;0,4,T3); T5:=IF (DDX&gt;0 AND REF(DDX,1)&gt;0 AND REF(DDX,2)&gt;0 AND REF(DDX,3)&gt;0 AND REF(DDX,4)&gt;0 AND REF(DDX,5)&lt;0,5,T4); T6:=IF (DDX&gt;0 AND REF(DDX,1)&gt;0 AND REF(DDX,2)&gt;0 AND REF(DDX,3)&gt;0 AND REF(DDX,4)&gt;0 AND REF(DDX,5)&gt;0 AND REF(DDX,6)&lt;0,6,T5); T7:=IF (DDX&gt;0 AND REF(DDX,1)&gt;0 AND REF(DDX,2)&gt;0 AND REF(DDX,3)&gt;0 AND REF(DDX,4)&gt;0 AND REF(DDX,5)&gt;0 AND REF(DDX,6)&gt;0 AND REF(DDX,7)&lt;0,7,T6); T8:=IF (DDX&gt;0 AND REF(DDX,1)&gt;0 AND REF(DDX,2)&gt;0 AND REF(DDX,3)&gt;0 AND REF(DDX,4)&gt;0 AND REF(DDX,5)&gt;0 AND REF(DDX,6)&gt;0 AND REF(DDX,7)&gt;0 AND REF(DDX,8)&lt;0,8,T7); T9:=IF (DDX&gt;0 AND REF(DDX,1)&gt;0 AND REF(DDX,2)&gt;0 AND REF(DDX,3)&gt;0 AND REF(DDX,4)&gt;0 AND REF(DDX,5)&gt;0 AND REF(DDX,6)&gt;0 AND REF(DDX,7)&gt;0 AND REF(DDX,8)&gt;0 AND REF(DDX,9)&lt;0,9,T8); T:=IF (DDX&gt;0 AND REF(DDX,1)&gt;0 AND REF(DDX,2)&gt;0 AND REF(DDX,3)&gt;0 AND REF(DDX,4)&gt;0 AND REF(DDX,5)&gt;0 AND REF(DDX,6)&gt;0 AND REF(DDX,7)&gt;0 AND REF(DDX,8)&gt;0 AND REF(DDX,9)&gt;0,10,T9); DRAWTEXT_FIX(1,0.190,0.500,0,STRCAT(STRCAT(' ',CON2STR(T,0)),' [天] ')),COLORYELLOW; T11:=IF (DDY&gt;0 AND REF(DDY,1)&lt;0,1,0); T21:=IF (DDY&gt;0 AND REF(DDY,1)&gt;0 AND REF(DDY,2)&lt;0,2,T11); T31:=IF (DDY&gt;0 AND REF(DDY,1)&gt;0 AND REF(DDY,2)&gt;0 AND REF(DDY,3)&lt;0,3,T21); T41:=IF (DDY&gt;0 AND REF(DDY,1)&gt;0 AND REF(DDY,2)&gt;0 AND REF(DDY,3)&gt;0 AND REF(DDY,4)&lt;0,4,T31); T51:=IF (DDY&gt;0 AND REF(DDY,1)&gt;0 AND REF(DDY,2)&gt;0 AND REF(DDY,3)&gt;0 AND REF(DDY,4)&gt;0 AND REF(DDY,5)&lt;0,5,T41); T61:=IF (DDY&gt;0 AND REF(DDY,1)&gt;0 AND REF(DDY,2)&gt;0 AND REF(DDY,3)&gt;0 AND REF(DDY,4)&gt;0 AND REF(DDY,5)&gt;0 AND REF(DDY,6)&lt;0,6,T51); T71:=IF (DDY&gt;0 AND REF(DDY,1)&gt;0 AND REF(DDY,2)&gt;0 AND REF(DDY,3)&gt;0 AND REF(DDY,4)&gt;0 AND REF(DDY,5)&gt;0 AND REF(DDY,6)&gt;0 AND REF(DDY,7)&lt;0,7,T61); T81:=IF (DDY&gt;0 AND REF(DDY,1)&gt;0 AND REF(DDY,2)&gt;0 AND REF(DDY,3)&gt;0 AND REF(DDY,4)&gt;0 AND REF(DDY,5)&gt;0 AND REF(DDY,6)&gt;0 AND REF(DDY,7)&gt;0 AND REF(DDY,8)&lt;0,8,T71); T91:=IF (DDY&gt;0 AND REF(DDY,1)&gt;0 AND REF(DDY,2)&gt;0 AND REF(DDY,3)&gt;0 AND REF(DDY,4)&gt;0 AND REF(DDY,5)&gt;0 AND REF(DDY,6)&gt;0 AND REF(DDY,7)&gt;0 AND REF(DDY,8)&gt;0 AND REF(DDY,9)&lt;0,9,T81); TY01:=IF (DDY&gt;0 AND REF(DDY,1)&gt;0 AND REF(DDY,2)&gt;0 AND REF(DDY,3)&gt;0 AND REF(DDY,4)&gt;0 AND REF(DDY,5)&gt;0 AND REF(DDY,6)&gt;0 AND REF(DDY,7)&gt;0 AND REF(DDY,8)&gt;0 AND REF(DDY,9)&gt;0,10,T91); DRAWTEXT_FIX(1,0.190,0.548,0,STRCAT(STRCAT(' ',CON2STR(TY01,0)),' [天] ')),COLORYELLOW; T1Z:=IF (DDZ&gt;0 AND REF(DDZ,2)&lt;0,1,0); T2Z:=IF (DDZ&gt;0 AND REF(DDZ,1)&gt;0 AND REF(DDZ,2)&lt;0,2,T1Z); T3Z:=IF (DDZ&gt;0 AND REF(DDZ,1)&gt;0 AND REF(DDZ,2)&gt;0 AND REF(DDZ,3)&lt;0,3,T2Z); T4Z:=IF (DDZ&gt;0 AND REF(DDZ,1)&gt;0 AND REF(DDZ,2)&gt;0 AND REF(DDZ,3)&gt;0 AND REF(DDZ,4)&lt;0,4,T3Z); T5Z:=IF (DDZ&gt;0 AND REF(DDZ,1)&gt;0 AND REF(DDZ,2)&gt;0 AND REF(DDZ,3)&gt;0 AND REF(DDZ,4)&gt;0 AND REF(DDZ,5)&lt;0,5,T4Z); T6Z:=IF (DDZ&gt;0 AND REF(DDZ,1)&gt;0 AND REF(DDZ,2)&gt;0 AND REF(DDZ,3)&gt;0 AND REF(DDZ,4)&gt;0 AND REF(DDZ,5)&gt;0 AND REF(DDZ,6)&lt;0,6,T5Z); T7Z:=IF (DDZ&gt;0 AND REF(DDZ,1)&gt;0 AND REF(DDZ,2)&gt;0 AND REF(DDZ,3)&gt;0 AND REF(DDZ,4)&gt;0 AND REF(DDZ,5)&gt;0 AND REF(DDZ,6)&gt;0 AND REF(DDZ,7)&lt;0,7,T6Z); T8Z:=IF (DDZ&gt;0 AND REF(DDZ,1)&gt;0 AND REF(DDZ,2)&gt;0 AND REF(DDZ,3)&gt;0 AND REF(DDZ,4)&gt;0 AND REF(DDZ,5)&gt;0 AND REF(DDZ,6)&gt;0 AND REF(DDZ,7)&gt;0 AND REF(DDZ,8)&lt;0,8,T7Z); T9Z:=IF (DDZ&gt;0 AND REF(DDZ,1)&gt;0 AND REF(DDZ,2)&gt;0 AND REF(DDZ,3)&gt;0 AND REF(DDZ,4)&gt;0 AND REF(DDZ,5)&gt;0 AND REF(DDZ,6)&gt;0 AND REF(DDZ,7)&gt;0 AND REF(DDZ,8)&gt;0 AND REF(DDZ,9)&lt;0,9,T8Z); TZ:=IF (DDZ&gt;0 AND REF(DDZ,1)&gt;0 AND REF(DDZ,2)&gt;0 AND REF(DDZ,3)&gt;0 AND REF(DDZ,4)&gt;0 AND REF(DDZ,5)&gt;0 AND REF(DDZ,6)&gt;0 AND REF(DDZ,7)&gt;0 AND REF(DDZ,8)&gt;0 AND REF(DDZ,9)&gt;0,10,T9Z); DRAWTEXT_FIX(1,0.190,0.596,0,STRCAT(STRCAT(' ',CON2STR(TZ,0)),' [天] ')),COLORYELLOW; DIF:=EMA(CLOSE,12)-EMA(CLOSE,26); DEA:=EMA(DIF,9); MACD:=(DIF-DEA)*2; VAR113:=HHV(HIGH,60); VAR114:=LLV(LOW,30); VAR115:=(CLOSE-MA(CLOSE,32))/MA(CLOSE,32)*100; VAR116:=(VAR113+VAR114+VAR115)/3; VAR117:=EMA(VAR116,5); K01:=EMA(VAR117,5)*2, COLORFF00FF; D01:=EMA(K01,5), COLORWHITE; J01:=K01*3-D01*2, COLORYELLOW; ENTERLONG:=CROSS(K01,D01); EXITLONG:=CROSS(D01,K01); B01:=(DRAWICON((ZIG(3,5)&gt;REF(ZIG(3,5),1)) AND (REF(ZIG(3,5),1)&lt;=REF(ZIG(3,5),2)) AND (REF(ZIG(3,5),2)&lt;=REF(ZIG(3,5),3)),L*0.98,1))*D01*2/3; B02:=IF(TROUGHBARS(3,15,1)=1 AND HIGH&gt;LOW+0.01,20,0); 必买:=(B01 AND B02) AND 净流入&gt;0; 必卖:=IF(PEAKBARS(3,15,1)=1,80,100),COLORGREEN,LINETHICK1; QQ:=必卖=80; B03:=((ZIG(3,5)&gt;REF(ZIG(3,5),1)) AND (REF(ZIG(3,5),1)&lt;=REF(ZIG(3,5),2)) AND (REF(ZIG(3,5),2)&lt;=REF(ZIG(3,5),3))); V1:=EMA(CLOSE,60)-EMA(CLOSE,300); V2:=EMA(V1,300); V3:=(CLOSE-(LOW,8))/((HIGH,8)-LLV(LOW,8))*100; V4:=SMA(V3,2,1),NODRAW; V5:=SMA(V4,2,1),NODRAW; V6:=CLOSE/REF(CLOSE,3)&gt;=1.1; V7:=BACKSET(V6,3); 大涨:=(V7 AND COUNT(V7,3)=1); DRAWICON(必买,L-0.16,11); DRAWICON(大涨 AND 必买,L-0.16,9); DRAWICON(大涨,L-0.18,1); DRAWICON(QQ,H+0.1,6);"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-05-28T05:50:51.000Z"}],["meta",{"property":"article:author","content":"涎涎"}],["meta",{"property":"article:tag","content":"bank"}],["meta",{"property":"article:published_time","content":"2022-03-28T17:42:41.000Z"}],["meta",{"property":"article:modified_time","content":"2023-05-28T05:50:51.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"超级短线交易\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2022-03-28T17:42:41.000Z\\",\\"dateModified\\":\\"2023-05-28T05:50:51.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"涎涎\\"}]}"]],"description":"超级短线交易.md 源码 DRAWKLINE(H,O,L,C); ZKP:=IF(C&gt;REF(C,1),REF(C,1),DRAWNULL); ZSP:=IF(C&gt;REF(C,1),C,DRAWNULL); DKP:=IF(C&lt;=REF(C,1),REF(C,1),DRAWNULL); DSP:=IF(C&lt;=REF(C,1),C,DRAWNULL); DRAWKLINE(H,DKP,L,DSP); STICKLINE(C&lt;=REF(C,1),DKP,DSP,3.05,0),COLORBLUE; STICKLINE(C&lt;=REF(C,1),DKP,DSP,2.2,0),COLORFF7700; STICKLINE(C&lt;=REF(C,1),DKP,DSP,1.5,0),COLORFF9900; STICKLINE(C&lt;=REF(C,1),DKP,DSP,0.5,0),COLORFFBB00; DRAWKLINE(H,ZKP,L,ZSP); STICKLINE(C&gt;REF(C,1),ZKP,ZSP,3.05,0),COLOR000099; STICKLINE(C&gt;REF(C,1),ZKP,ZSP,2.2,0),COLOR0000CC; STICKLINE(C&gt;REF(C,1),ZKP,ZSP,1.5,0),COLOR0000FF; STICKLINE(C&gt;REF(C,1),ZKP,ZSP,0.5,0),COLORCC66FF; STICKLINE(V/REF(V,1)&gt;2 AND CLOSE&gt;=OPEN,ZKP,ZSP,1,0),COLORYELLOW; VAR111:=ZIG(3,13); STICKLINE((REF(VAR111,2) &lt; REF(VAR111,1)) AND (VAR111 &lt; REF(VAR111,1)),CLOSE,OPEN,3,0),COLOR66FF00; DRAWTEXT_FIX(STICKLINE((REF(VAR111,2) &lt; REF(VAR111,1)) AND (VAR111 &lt; REF(VAR111,1)),CLOSE,OPEN,5,0),0.00,0.11,0,''),COLOR00FF00,LINETHICK1; MA5:MA(C,5)LINETHICK3,COLOR00CCFF; MA10:=MA(C,10); MA20:=MA(C,20); MA30:=MA(C,30); TY:=C; A1:=REF(TY,10)=HHV(TY,2*10+1); B1:=FILTER(A1,10); C1:=BACKSET(B1,10+1); HD:=FILTER(C1,10); A2:=REF(TY,10)=LLV(TY,2*10+1); B2:=FILTER(A2,10); C2:=BACKSET(B2,10+1); LD:=FILTER(C2,10); 前期高位:REF(C,BARSLAST(HD)),COLOR8000FF,POINTDOT; STICKLINE(C,前期高位,前期高位,8,0),COLOR8000FF; JRH:=HHV(C,2); JRL:=LLV(C,2); VAR01:=(CLOSE&gt;REF(CLOSE,1) AND CLOSE&gt;REF(CLOSE,2)); VAR02:=(REF(VAR01,1) AND CLOSE&lt;=REF(CLOSE,1) AND CLOSE&gt;=REF(CLOSE,2)); VAR03:=(REF(VAR02,1) AND CLOSE&gt;=REF(CLOSE,1) AND CLOSE&lt;=REF(CLOSE,2)); VAR04:=(REF(VAR03,1) AND CLOSE&lt;=REF(CLOSE,1) AND CLOSE&gt;=REF(CLOSE,2)); VAR05:=(REF(VAR04,1) AND CLOSE&gt;=REF(CLOSE,1) AND CLOSE&lt;=REF(CLOSE,2)); VAR06:=(REF(VAR05,1) AND CLOSE&lt;=REF(CLOSE,1) AND CLOSE&gt;=REF(CLOSE,2)); VAR07:=(REF(VAR06,1) AND CLOSE&gt;=REF(CLOSE,1) AND CLOSE&lt;=REF(CLOSE,2)); VAR08:=(REF(VAR07,1) AND CLOSE&lt;=REF(CLOSE,1) AND CLOSE&gt;=REF(CLOSE,2)); VAR09:=(REF(VAR08,1) AND CLOSE&gt;=REF(CLOSE,1) AND CLOSE&lt;=REF(CLOSE,2)); VARA:=(REF(VAR09,1) AND CLOSE&lt;=REF(CLOSE,1) AND CLOSE&gt;=REF(CLOSE,2)); VARB:=(REF(VARA,1) AND CLOSE&gt;=REF(CLOSE,1) AND CLOSE&lt;=REF(CLOSE,2)); VARC:=(REF(VARB,1) AND CLOSE&lt;=REF(CLOSE,1) AND CLOSE&gt;=REF(CLOSE,2)); VARD:=(CLOSE&lt;REF(CLOSE,1) AND CLOSE&lt;REF(CLOSE,2)); VARE:=(REF(VARD,1) AND CLOSE&gt;=REF(CLOSE,1) AND CLOSE&lt;=REF(CLOSE,2)); VARF:=(REF(VARE,1) AND CLOSE&lt;=REF(CLOSE,1) AND CLOSE&gt;=REF(CLOSE,2)); VAR010:=(REF(VARF,1) AND CLOSE&gt;=REF(CLOSE,1) AND CLOSE&lt;=REF(CLOSE,2)); VAR011:=(REF(VAR010,1) AND CLOSE&lt;=REF(CLOSE,1) AND CLOSE&gt;=REF(CLOSE,2)); VAR012:=(REF(VAR011,1) AND CLOSE&gt;=REF(CLOSE,1) AND CLOSE&lt;=REF(CLOSE,2)); VAR013:=(REF(VAR012,1) AND CLOSE&lt;=REF(CLOSE,1) AND CLOSE&gt;=REF(CLOSE,2)); VAR014:=(REF(VAR013,1) AND CLOSE&gt;=REF(CLOSE,1) AND CLOSE&lt;=REF(CLOSE,2)); VAR015:=(REF(VAR014,1) AND CLOSE&lt;=REF(CLOSE,1) AND CLOSE&gt;=REF(CLOSE,2)); VAR016:=(REF(VAR015,1) AND CLOSE&gt;=REF(CLOSE,1) AND CLOSE&lt;=REF(CLOSE,2)); VAR017:=(REF(VAR016,1) AND CLOSE&lt;=REF(CLOSE,1) AND CLOSE&gt;=REF(CLOSE,2)); VAR018:=(REF(VAR017,1) AND CLOSE&gt;=REF(CLOSE,1) AND CLOSE&lt;=REF(CLOSE,2)); VAR019:=((REF(VARD OR VARE OR VARF OR VAR010 OR VAR011 OR VAR012 OR VAR013 OR VAR014 OR VAR015 OR VAR016 OR VAR017 OR VAR018,1)) AND VAR01); VAR1A:=((REF(VAR01 OR VAR02 OR VAR03 OR VAR04 OR VAR05 OR VAR06 OR VAR07 OR VAR08 OR VAR09 OR VARA OR VARB OR VARC,1)) AND VARD); 红色持股:=VAR01 OR VAR02 OR VAR03 OR VAR04 OR VAR05 OR VAR06 OR VAR07 OR VAR08 OR VAR09 OR VARA OR VARB OR VARC,COLOR0000FF,NODRAW; 离场:=IF(红色持股,JRL,DRAWNULL); 明离场价:=离场,COLORFF99FF,NODRAW; 青色观望:=VARD OR VARE OR VARF OR VAR010 OR VAR011 OR VAR012 OR VAR013 OR VAR014 OR VAR015 OR VAR016 OR VAR017 OR VAR018,COLORFFFF00,NODRAW; 进:=IF(青色观望,JRH,DRAWNULL); 今离场价:REF(离场,1),COLOR0000FF,NODRAW; 明进场价:=进,COLOR33AACC,NODRAW; 今进场价:REF(明进场价,1),COLORGREEN,NODRAW; 上涨家数:INDEXADV,COLOR0080FF,NODRAW; 下跌家数:INDEXDEC,COLORGREEN,NODRAW; 五日乖离率:=(C-MA5)/MA5*100; BB5:=ATAN((MA5/REF(MA5,1)-1)*100)*180/3.1416; 速度5:=SMA(EMA((MA5-REF(MA5,1))/REF(MA5,1),3)*100,3,1); 加速度5:=EMA((速度5-REF(速度5,1)),3),NODRAW; IF(BB5&gt;30 AND MA5&gt;REF(MA5,1), MA5,DRAWNULL),LINETHICK3,COLORRED; BB10:=ATAN((MA10/REF(MA10,1)-1)*100)*180/3.1416; IF(BB5&lt;0 AND MA5&lt;REF(MA5,1), MA5,DRAWNULL),LINETHICK3,COLORGREEN; 三拾日乖离率:=(C-MA30)/MA30*100,NODRAW; VAR1:=(MA20-MA30)&gt;REF((MA20-MA30),1) AND MA20&gt;REF(MA20,1) AND MA30&gt;REF(MA30,1); VAR2:=(MA30-MA20)&lt;REF((MA30-MA20),1) AND MA20&lt;REF(MA20,1) AND MA30&lt;REF(MA30,1); BB30:=ATAN((MA30/REF(MA30,1)-1)*100)*180/3.1416; 强势狙击:=FILTER(BB30&gt;30 AND BB10&gt;45 AND CROSS(BB5,60),10); 加仓:=FILTER(COUNT(CROSS(BB5,30),5)&gt;=1 AND MA5&gt;REF(MA5,1) AND 三拾日乖离率&gt;REF(三拾日乖离率,1) AND MA10&gt;REF(MA10,1) AND 加速度5&gt;REF(加速度5,1) AND 速度5&gt;REF(速度5,1),10); 清仓:=FILTER(COUNT(CROSS(30,BB5),5)&gt;=1 AND (C&gt;MA30 OR O&gt;MA30) AND MA5&lt;REF(MA5,1) AND 三拾日乖离率&lt;REF(三拾日乖离率,1) AND MA10&lt;REF(MA10,1),10); DRAWTEXT(加仓 ,LOW*0.96,'加'),COLORYELLOW; JC:=CROSS(0,五日乖离率) AND 三拾日乖离率&lt;REF(三拾日乖离率,1) AND MA10&gt;REF(MA10,1) ; 减仓:=FILTER(JC,10); MR:=COUNT(CROSS(五日乖离率,0),3)&gt;=1 AND 三拾日乖离率&gt;REF(三拾日乖离率,1) AND MA5&gt;REF(MA5,1) AND (C/REF(C,1)-1)*100&gt;5 AND REF(C,1)&lt;MA30; 买入:=FILTER(MR,10); DRAWTEXT(减仓,HIGH*1.01,'←风险'),COLORCYAN; DRAWTEXT(买入,LOW*0.99,'买'),COLORYELLOW; DRAWTEXT(清仓 ,HIGH*1.02,'←清仓'),COLORGREEN; DRAWTEXT(强势狙击,LOW*0.98,'←狙击'),COLORWHITE; VAR21:=MAX(ABS(HIGH-AMOUNT/VOL/100),ABS(AMOUNT/VOL/100-LOW)); VAR3:=ABS((OPEN+CLOSE)/2-AMOUNT/VOL/100); MV:=(VAR21+VAR3)/AMOUNT*VOL*100*50; 压力:MA(REF(HHV(C,30),1),2),COLORABFF46; 支撑:MA(REF(LLV(C,30),1),2),COLOR9DFFFF; 总额:=AMOUNT; 买:=IF(O=C AND (C-REF(C,1))/REF(C,1)*100&gt;9.8,AMOUNT,AMOUNT/((H-L)*2-ABS(O-C))*(C-L)); 买%:=买/AMOUNT*100; 流入:=AMOUNT*买%/10000000000; 流出:=AMOUNT/100000000-流入; 净流:=(流入-流出); 总额3:=SUM(AMOUNT,3); 流入3:=SUM(流入,3); 流出3:=SUM(流出,3); 净流3:=SUM(流入-流出,3); 总额5:=SUM(AMOUNT,5); 流入5:=SUM(流入,5); 流出5:=SUM(流出,5); 净流5:=SUM(流入-流出,5); 总额10:=SUM(AMOUNT,10); 流入10:=SUM(流入,10); 流出10:=SUM(流出,10); 净流10:=SUM(流入-流出,10); 画:=CONST(FINDHIGH(总额10,0,190,1)); DRAWTEXT_FIX(1,0.00,0,0,'所属行业：')COLOR00FFFF; DRAWTEXT_FIX(1,0.06,0,0,HYBLOCK)COLOR00FFFF; DRAWTEXT_FIX(1,0.14,0,0,'所属地区：')COLOR00FFFF; DRAWTEXT_FIX(1,0.20,0,0,DYBLOCK)COLOR00FFFF; DRAWTEXT_FIX(1,0.30,0.00,0,'主题投资：')COLOR00FFFF; DRAWTEXT_FIX(1,0.36,0.00,0,EXTERNSTR(0,2))COLOR00FFFF; DRAWTEXT_FIX(1,0.00,0.05,0,'主营业务：')COLOR00FFFF; DRAWTEXT_FIX(1,0.06,0.05,0,EXTERNSTR(0,3))COLOR00FFFF; DRAWTEXT_FIX(1,0.00,0.10,0,'解禁日期：')COLOR00FFFF; DRAWTEXT_FIX(1,0.06,0.10,0,EXTERNSTR(0,4))COLOR00FFFF; DRAWTEXT_FIX(1,0.00,0.15,0,'莸利比例:'),COLORYELLOW; DRAWNUMBER_FIX(1,0.06,0.15,0,CONST(WINNER(C )*100)),COLOR0080FF; DRAWTEXT_FIX(1,0.12,0.15,0,'动态PE:'),COLORYELLOW; DRAWNUMBER_FIX(1,0.17,0.15,0,CONST(DYNAINFO(39))),COLOR0080FF; DRAWTEXT_FIX(1,0.22,0.15,0,'市值:'),COLORYELLOW; DRAWNUMBER_FIX(1,0.26,0.15,0,FINANCE(40)/100000000),COLOR0080FF; DRAWTEXT_FIX (1,0.31,0.15,0,'公积金(股):'),COLORYELLOW; DRAWNUMBER_FIX(1,0.38,0.15,0,FINANCE(18)),COLOR0080FF; DRAWTEXT_FIX (1,0.43,0.15,0,'收益:'),COLORYELLOW; DRAWNUMBER_FIX(1,0.47,0.15,0,FINANCE(33)),COLOR0080FF; DRAWTEXT_FIX(1,0.00,0.19,0,'净流入(亿):'),COLORYELLOW; DRAWTEXT_FIX(1,0.06,0.19,0,'1日'),COLORYELLOW; DRAWTEXT_FIX(1,0.12,0.19,0,'3日'),COLORYELLOW; DRAWTEXT_FIX(1,0.18,0.19,0,'5日'),COLORYELLOW; DRAWTEXT_FIX(1,0.24,0.19,0,'10日'),COLORYELLOW; DRAWNUMBER_FIX(1,0.08,0.19,0,CONST((净流))),COLOR0080FF; DRAWNUMBER_FIX(1,0.14,0.19,0,CONST((净流3))),COLOR0080FF; DRAWNUMBER_FIX(1,0.20,0.19,0,CONST((净流5))),COLOR0080FF; DRAWNUMBER_FIX(1,0.265,0.19,0,CONST((净流10))),COLOR0080FF; DRAWTEXT_FIX(1,0.00,0.23,0,'愚民导向：'),COLOR00FFFF; DRAWTEXT_FIX(1,0.06,0.23,0,EXTERNSTR(0,5)),COLOR00FFFF; DRAWRECTREL(0,500,147,999.4,IF(120,RGB(10,0,0),0)); 超B:=L2_AMO(0,2)/10000.0; 大B:=L2_AMO(1,2)/10000.0; 中B:=L2_AMO(2,2)/10000.0; 小B:=L2_AMO(3,2)/10000.0; 超S:=L2_AMO(0,3)/10000.0; 大S:=L2_AMO(1,3)/10000.0; 中S:=L2_AMO(2,3)/10000.0; 小S:=L2_AMO(3,3)/10000.0; TESTSKIP(NOT(超B OR 大B OR 中B OR 小B OR 超S OR 大S OR 中S OR 小S)!=0); 大宗进:=(超B)+(大B),NODRAW; 大宗出:=(超S)+(大S),NODRAW; 非大宗进:=(中B)+(小B),NODRAW; 非大宗出:=(中S)+(小S),NODRAW; 大宗进限制:=IF((超B+大B)=0,0,大宗进); 大宗出限制:=IF((超S+大S)=0,0,大宗出); 非大宗进限制:=IF(中B+小B=0,0,非大宗进); 非大宗出限制:=IF(中S+小S=0,0,非大宗出); 主力净流入:=(超B+大B)-(超S+大S),COLORRED,NODRAW; 散户净流入:=(中B+小B)-(中S+小S),COLORRED,NODRAW; 净流入:=(超B+大B+中B+小B)-(超S+大S+中S+小S),COLORRED,NODRAW; 大单流入:=(超B+大B)/(超B+大B+超S+大S)*100,NODRAW; 大单流入限制:=IF((超B+大B+超S+大S)=0,0,大单流入); 大单流出比:=(超S+大S)/(超B+大B+超S+大S)*100,NODRAW; 大单流出限制:=IF((超B+大B+超S+大S)=0,0,大单流出比); 总流入比:=(超B+大B+中B+小B)/(超B+大B+中B+小B+超S+大S+中S+小S)*100,NODRAW; 总流出比:=(超S+大S+中S+小S)/(超B+大B+中B+小B+超S+大S+中S+小S)*100,NODRAW; 成交总量:=(超B+大B+中B+小B+超S+大S+中S+小S),NODRAW; 机构参与度:=(超B+超S+大B+大S)/成交总量*100,COLORYELLOW,NODRAW; 大单强度:=(超B+大B-超S-大S)/成交总量*100,COLORYELLOW,NODRAW; 大单强度限制:=IF(大单强度=0,-100,大单强度); 大单强度比:=IF(大单强度&gt;=0,(大单强度限制+100)/2,100-ABS((大单强度限制-100)/2)),NODRAW; 超单强度:=(超B-超S)/(超B+超S)*100,COLORYELLOW,NODRAW; 超单强度限制:=IF(超单强度=0,-100,超单强度); 超单强度比:=IF(超单强度&gt;0,(超单强度限制+100)/2,IF(超单强度&lt;0,100-ABS((超单强度限制-100)/2),0)),NODRAW; DAZHIV:=CONST(MAX(ABS(大宗进),MAX(ABS(大宗出),MAX(ABS(非大宗进),ABS(非大宗出))))),NODRAW; DRAWRECTREL(0,CONST(930-(ABS(大宗进)*250/DAZHIV)),35,950,IF(CONST(大宗进&gt;0),RGB(255,0,0),RGB(23,125,255))); DRAWRECTREL(37,CONST(930-(ABS(大宗出)*250/DAZHIV)),72,950,IF(CONST(大宗出&gt;0),RGB(23,125,255),RGB(255,0,0))); DRAWRECTREL(75,CONST(930-(ABS(非大宗进)*250/DAZHIV)),110,950,IF(CONST(非大宗进&gt;0),RGB(255,0,0),RGB(23,125,255))); DRAWRECTREL(112,CONST(930-(ABS(非大宗出)*250/DAZHIV)),147,950,IF(CONST(非大宗出&gt;0),RGB(23,125,255),RGB(255,0,0))); DRAWRECTREL(150,CONST(940-(ABS(净流入)*250/DAZHIV))-20,190,950,IF(CONST(净流入&gt;0),RGB(200,0,0),RGB(0,125,50))); DRAWTEXT_FIX(CURRBARSCOUNT=1,0.0001,0.9,0,STRCAT('',CON2STR(大宗进/1,0))),COLORYELLOW; DRAWTEXT_FIX(CURRBARSCOUNT=1,0.036,0.9,0,STRCAT('',CON2STR(大宗出/1,0))),COLORYELLOW; DRAWTEXT_FIX(CURRBARSCOUNT=1,0.074,0.9,0,STRCAT('',CON2STR(非大宗进/1,0))),COLORYELLOW; DRAWTEXT_FIX(CURRBARSCOUNT=1,0.111,0.9,0,STRCAT('',CON2STR(非大宗出/1,0))),COLORYELLOW; DRAWTEXT_FIX(CURRBARSCOUNT=1,0.150,0.9,0,STRCAT('',CON2STR(净流入/1,0))),COLORYELLOW; DRAWTEXT_FIX(1,0.000,0.99,0,STRCAT(STRCAT('主力 ',CON2STR(主力净流入,0)),'万')),COLORMAGENTA; DRAWTEXT_FIX(1,0.078,0.99,0,STRCAT(STRCAT('散户 ',CON2STR(散户净流入,0)),'万')),COLORCYAN; DRAWTEXT_FIX(CURRBARSCOUNT=1,0.145,0.99,0,'净流入:(万)'),COLORYELLOW; 主力买力度:=LARGEINTRDVOL*1000/VOL; 主力卖力度:=LARGEOUTTRDVOL*1000/VOL; AAD:=CONST(MAX(ABS(主力买力度),ABS(主力卖力度)))*4,NODRAW; DRAWRECTREL(0,515,CONST(ABS(主力买力度)*560/AAD),568,IF(CONST(主力买力度)&gt;0,RGB(255,0,0),RGB(0,50,0))); DRAWRECTREL(0,570,CONST(ABS(主力卖力度)*560/AAD),623,IF(CONST(主力卖力度)&gt;0,RGB(0,50,0),RGB(255,0,0))); DRAWTEXT_FIX(1,0,0.524,0,STRCAT('主买力度:',CON2STR(主力买力度,0))),COLORYELLOW; DRAWTEXT_FIX(1,0,0.576,0,STRCAT('主卖力度:',CON2STR(主力卖力度,0))),COLORYELLOW; {DDE显示} DDX:=(LARGEINTRDVOL-LARGEOUTTRDVOL)*1000/FINANCE(7); DDY:=IF(TRADENUM&gt;0,(TRADEOUTNUM-TRADEINNUM)*100/TRADENUM,0); DDZ:=IF(TRADENUM&gt;0,(LARGETRDINNUM-LARGETRDOUTNUM)/TRADENUM*100,0); DRAWRECTREL(150,500,192,540,IF(CONST(DDX)&gt;0,RGB(255,0,0),RGB(0,50,0))); DRAWRECTREL(150,545,192,585,IF(CONST(DDY)&gt;0,RGB(255,0,0),RGB(0,50,0))); DRAWRECTREL(150,590,192,630,IF(CONST(DDZ)&gt;0,RGB(255,0,0),RGB(0,50,0))); DRAWTEXT_FIX(1,0.153,0.500,0,STRCAT('DDX:',CON2STR(DDX,1))),COLORYELLOW,COLORWHITE; DRAWTEXT_FIX(1,0.153,0.548,0,STRCAT('DDY:',CON2STR(DDY,1))),COLORYELLOW,COLORWHITE; DRAWTEXT_FIX(1,0.153,0.596,0,STRCAT('DDZ:',CON2STR(DDZ,1))),COLORYELLOW,COLORWHITE; T1:=IF (DDX&gt;0 AND REF(DDX,1)&lt;0,1,0); T2:=IF (DDX&gt;0 AND REF(DDX,1)&gt;0 AND REF(DDX,2)&lt;0,2,T1); T3:=IF (DDX&gt;0 AND REF(DDX,1)&gt;0 AND REF(DDX,2)&gt;0 AND REF(DDX,3)&lt;0,3,T2); T4:=IF (DDX&gt;0 AND REF(DDX,1)&gt;0 AND REF(DDX,2)&gt;0 AND REF(DDX,3)&gt;0 AND REF(DDX,4)&lt;0,4,T3); T5:=IF (DDX&gt;0 AND REF(DDX,1)&gt;0 AND REF(DDX,2)&gt;0 AND REF(DDX,3)&gt;0 AND REF(DDX,4)&gt;0 AND REF(DDX,5)&lt;0,5,T4); T6:=IF (DDX&gt;0 AND REF(DDX,1)&gt;0 AND REF(DDX,2)&gt;0 AND REF(DDX,3)&gt;0 AND REF(DDX,4)&gt;0 AND REF(DDX,5)&gt;0 AND REF(DDX,6)&lt;0,6,T5); T7:=IF (DDX&gt;0 AND REF(DDX,1)&gt;0 AND REF(DDX,2)&gt;0 AND REF(DDX,3)&gt;0 AND REF(DDX,4)&gt;0 AND REF(DDX,5)&gt;0 AND REF(DDX,6)&gt;0 AND REF(DDX,7)&lt;0,7,T6); T8:=IF (DDX&gt;0 AND REF(DDX,1)&gt;0 AND REF(DDX,2)&gt;0 AND REF(DDX,3)&gt;0 AND REF(DDX,4)&gt;0 AND REF(DDX,5)&gt;0 AND REF(DDX,6)&gt;0 AND REF(DDX,7)&gt;0 AND REF(DDX,8)&lt;0,8,T7); T9:=IF (DDX&gt;0 AND REF(DDX,1)&gt;0 AND REF(DDX,2)&gt;0 AND REF(DDX,3)&gt;0 AND REF(DDX,4)&gt;0 AND REF(DDX,5)&gt;0 AND REF(DDX,6)&gt;0 AND REF(DDX,7)&gt;0 AND REF(DDX,8)&gt;0 AND REF(DDX,9)&lt;0,9,T8); T:=IF (DDX&gt;0 AND REF(DDX,1)&gt;0 AND REF(DDX,2)&gt;0 AND REF(DDX,3)&gt;0 AND REF(DDX,4)&gt;0 AND REF(DDX,5)&gt;0 AND REF(DDX,6)&gt;0 AND REF(DDX,7)&gt;0 AND REF(DDX,8)&gt;0 AND REF(DDX,9)&gt;0,10,T9); DRAWTEXT_FIX(1,0.190,0.500,0,STRCAT(STRCAT(' ',CON2STR(T,0)),' [天] ')),COLORYELLOW; T11:=IF (DDY&gt;0 AND REF(DDY,1)&lt;0,1,0); T21:=IF (DDY&gt;0 AND REF(DDY,1)&gt;0 AND REF(DDY,2)&lt;0,2,T11); T31:=IF (DDY&gt;0 AND REF(DDY,1)&gt;0 AND REF(DDY,2)&gt;0 AND REF(DDY,3)&lt;0,3,T21); T41:=IF (DDY&gt;0 AND REF(DDY,1)&gt;0 AND REF(DDY,2)&gt;0 AND REF(DDY,3)&gt;0 AND REF(DDY,4)&lt;0,4,T31); T51:=IF (DDY&gt;0 AND REF(DDY,1)&gt;0 AND REF(DDY,2)&gt;0 AND REF(DDY,3)&gt;0 AND REF(DDY,4)&gt;0 AND REF(DDY,5)&lt;0,5,T41); T61:=IF (DDY&gt;0 AND REF(DDY,1)&gt;0 AND REF(DDY,2)&gt;0 AND REF(DDY,3)&gt;0 AND REF(DDY,4)&gt;0 AND REF(DDY,5)&gt;0 AND REF(DDY,6)&lt;0,6,T51); T71:=IF (DDY&gt;0 AND REF(DDY,1)&gt;0 AND REF(DDY,2)&gt;0 AND REF(DDY,3)&gt;0 AND REF(DDY,4)&gt;0 AND REF(DDY,5)&gt;0 AND REF(DDY,6)&gt;0 AND REF(DDY,7)&lt;0,7,T61); T81:=IF (DDY&gt;0 AND REF(DDY,1)&gt;0 AND REF(DDY,2)&gt;0 AND REF(DDY,3)&gt;0 AND REF(DDY,4)&gt;0 AND REF(DDY,5)&gt;0 AND REF(DDY,6)&gt;0 AND REF(DDY,7)&gt;0 AND REF(DDY,8)&lt;0,8,T71); T91:=IF (DDY&gt;0 AND REF(DDY,1)&gt;0 AND REF(DDY,2)&gt;0 AND REF(DDY,3)&gt;0 AND REF(DDY,4)&gt;0 AND REF(DDY,5)&gt;0 AND REF(DDY,6)&gt;0 AND REF(DDY,7)&gt;0 AND REF(DDY,8)&gt;0 AND REF(DDY,9)&lt;0,9,T81); TY01:=IF (DDY&gt;0 AND REF(DDY,1)&gt;0 AND REF(DDY,2)&gt;0 AND REF(DDY,3)&gt;0 AND REF(DDY,4)&gt;0 AND REF(DDY,5)&gt;0 AND REF(DDY,6)&gt;0 AND REF(DDY,7)&gt;0 AND REF(DDY,8)&gt;0 AND REF(DDY,9)&gt;0,10,T91); DRAWTEXT_FIX(1,0.190,0.548,0,STRCAT(STRCAT(' ',CON2STR(TY01,0)),' [天] ')),COLORYELLOW; T1Z:=IF (DDZ&gt;0 AND REF(DDZ,2)&lt;0,1,0); T2Z:=IF (DDZ&gt;0 AND REF(DDZ,1)&gt;0 AND REF(DDZ,2)&lt;0,2,T1Z); T3Z:=IF (DDZ&gt;0 AND REF(DDZ,1)&gt;0 AND REF(DDZ,2)&gt;0 AND REF(DDZ,3)&lt;0,3,T2Z); T4Z:=IF (DDZ&gt;0 AND REF(DDZ,1)&gt;0 AND REF(DDZ,2)&gt;0 AND REF(DDZ,3)&gt;0 AND REF(DDZ,4)&lt;0,4,T3Z); T5Z:=IF (DDZ&gt;0 AND REF(DDZ,1)&gt;0 AND REF(DDZ,2)&gt;0 AND REF(DDZ,3)&gt;0 AND REF(DDZ,4)&gt;0 AND REF(DDZ,5)&lt;0,5,T4Z); T6Z:=IF (DDZ&gt;0 AND REF(DDZ,1)&gt;0 AND REF(DDZ,2)&gt;0 AND REF(DDZ,3)&gt;0 AND REF(DDZ,4)&gt;0 AND REF(DDZ,5)&gt;0 AND REF(DDZ,6)&lt;0,6,T5Z); T7Z:=IF (DDZ&gt;0 AND REF(DDZ,1)&gt;0 AND REF(DDZ,2)&gt;0 AND REF(DDZ,3)&gt;0 AND REF(DDZ,4)&gt;0 AND REF(DDZ,5)&gt;0 AND REF(DDZ,6)&gt;0 AND REF(DDZ,7)&lt;0,7,T6Z); T8Z:=IF (DDZ&gt;0 AND REF(DDZ,1)&gt;0 AND REF(DDZ,2)&gt;0 AND REF(DDZ,3)&gt;0 AND REF(DDZ,4)&gt;0 AND REF(DDZ,5)&gt;0 AND REF(DDZ,6)&gt;0 AND REF(DDZ,7)&gt;0 AND REF(DDZ,8)&lt;0,8,T7Z); T9Z:=IF (DDZ&gt;0 AND REF(DDZ,1)&gt;0 AND REF(DDZ,2)&gt;0 AND REF(DDZ,3)&gt;0 AND REF(DDZ,4)&gt;0 AND REF(DDZ,5)&gt;0 AND REF(DDZ,6)&gt;0 AND REF(DDZ,7)&gt;0 AND REF(DDZ,8)&gt;0 AND REF(DDZ,9)&lt;0,9,T8Z); TZ:=IF (DDZ&gt;0 AND REF(DDZ,1)&gt;0 AND REF(DDZ,2)&gt;0 AND REF(DDZ,3)&gt;0 AND REF(DDZ,4)&gt;0 AND REF(DDZ,5)&gt;0 AND REF(DDZ,6)&gt;0 AND REF(DDZ,7)&gt;0 AND REF(DDZ,8)&gt;0 AND REF(DDZ,9)&gt;0,10,T9Z); DRAWTEXT_FIX(1,0.190,0.596,0,STRCAT(STRCAT(' ',CON2STR(TZ,0)),' [天] ')),COLORYELLOW; DIF:=EMA(CLOSE,12)-EMA(CLOSE,26); DEA:=EMA(DIF,9); MACD:=(DIF-DEA)*2; VAR113:=HHV(HIGH,60); VAR114:=LLV(LOW,30); VAR115:=(CLOSE-MA(CLOSE,32))/MA(CLOSE,32)*100; VAR116:=(VAR113+VAR114+VAR115)/3; VAR117:=EMA(VAR116,5); K01:=EMA(VAR117,5)*2, COLORFF00FF; D01:=EMA(K01,5), COLORWHITE; J01:=K01*3-D01*2, COLORYELLOW; ENTERLONG:=CROSS(K01,D01); EXITLONG:=CROSS(D01,K01); B01:=(DRAWICON((ZIG(3,5)&gt;REF(ZIG(3,5),1)) AND (REF(ZIG(3,5),1)&lt;=REF(ZIG(3,5),2)) AND (REF(ZIG(3,5),2)&lt;=REF(ZIG(3,5),3)),L*0.98,1))*D01*2/3; B02:=IF(TROUGHBARS(3,15,1)=1 AND HIGH&gt;LOW+0.01,20,0); 必买:=(B01 AND B02) AND 净流入&gt;0; 必卖:=IF(PEAKBARS(3,15,1)=1,80,100),COLORGREEN,LINETHICK1; QQ:=必卖=80; B03:=((ZIG(3,5)&gt;REF(ZIG(3,5),1)) AND (REF(ZIG(3,5),1)&lt;=REF(ZIG(3,5),2)) AND (REF(ZIG(3,5),2)&lt;=REF(ZIG(3,5),3))); V1:=EMA(CLOSE,60)-EMA(CLOSE,300); V2:=EMA(V1,300); V3:=(CLOSE-(LOW,8))/((HIGH,8)-LLV(LOW,8))*100; V4:=SMA(V3,2,1),NODRAW; V5:=SMA(V4,2,1),NODRAW; V6:=CLOSE/REF(CLOSE,3)&gt;=1.1; V7:=BACKSET(V6,3); 大涨:=(V7 AND COUNT(V7,3)=1); DRAWICON(必买,L-0.16,11); DRAWICON(大涨 AND 必买,L-0.16,9); DRAWICON(大涨,L-0.18,1); DRAWICON(QQ,H+0.1,6);"},"headers":[],"git":{"createdTime":1684701424000,"updatedTime":1685253051000,"contributors":[{"name":"涎涎","email":"yanbo0039@yeah.net","commits":2}]},"readingTime":{"minutes":13.39,"words":4018},"filePathRelative":"zh/programBlog/ServerSideLanguage/bank/5-超级短线交易.md","localizedDate":"2022年3月28日","excerpt":"<!-- more -->\\n<h1> <a href=\\"http://xn--tlq248cxtm1kgqd899g.md\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">超级短线交易.md</a></h1>\\n<ul>\\n<li>源码</li>\\n</ul>\\n<div class=\\"language-tn6 line-numbers-mode\\" data-ext=\\"tn6\\"><pre class=\\"language-tn6\\"><code>DRAWKLINE(H,O,L,C);\\nZKP:=IF(C&gt;REF(C,1),REF(C,1),DRAWNULL);\\nZSP:=IF(C&gt;REF(C,1),C,DRAWNULL);\\nDKP:=IF(C&lt;=REF(C,1),REF(C,1),DRAWNULL);\\nDSP:=IF(C&lt;=REF(C,1),C,DRAWNULL);\\nDRAWKLINE(H,DKP,L,DSP);\\nSTICKLINE(C&lt;=REF(C,1),DKP,DSP,3.05,0),COLORBLUE;\\nSTICKLINE(C&lt;=REF(C,1),DKP,DSP,2.2,0),COLORFF7700;\\nSTICKLINE(C&lt;=REF(C,1),DKP,DSP,1.5,0),COLORFF9900;\\nSTICKLINE(C&lt;=REF(C,1),DKP,DSP,0.5,0),COLORFFBB00;\\nDRAWKLINE(H,ZKP,L,ZSP);\\nSTICKLINE(C&gt;REF(C,1),ZKP,ZSP,3.05,0),COLOR000099;\\nSTICKLINE(C&gt;REF(C,1),ZKP,ZSP,2.2,0),COLOR0000CC;\\nSTICKLINE(C&gt;REF(C,1),ZKP,ZSP,1.5,0),COLOR0000FF;\\nSTICKLINE(C&gt;REF(C,1),ZKP,ZSP,0.5,0),COLORCC66FF;\\nSTICKLINE(V/REF(V,1)&gt;2 AND CLOSE&gt;=OPEN,ZKP,ZSP,1,0),COLORYELLOW;\\nVAR111:=ZIG(3,13);\\nSTICKLINE((REF(VAR111,2) &lt; REF(VAR111,1)) AND (VAR111 &lt; REF(VAR111,1)),CLOSE,OPEN,3,0),COLOR66FF00;\\nDRAWTEXT_FIX(STICKLINE((REF(VAR111,2) &lt; REF(VAR111,1)) AND (VAR111 &lt; REF(VAR111,1)),CLOSE,OPEN,5,0),0.00,0.11,0,''),COLOR00FF00,LINETHICK1;\\nMA5:MA(C,5)LINETHICK3,COLOR00CCFF;\\nMA10:=MA(C,10);\\nMA20:=MA(C,20);\\nMA30:=MA(C,30);\\nTY:=C;\\nA1:=REF(TY,10)=HHV(TY,2*10+1);\\nB1:=FILTER(A1,10);\\nC1:=BACKSET(B1,10+1);\\nHD:=FILTER(C1,10);\\nA2:=REF(TY,10)=LLV(TY,2*10+1);\\nB2:=FILTER(A2,10);\\nC2:=BACKSET(B2,10+1);\\nLD:=FILTER(C2,10);\\n前期高位:REF(C,BARSLAST(HD)),COLOR8000FF,POINTDOT;\\nSTICKLINE(C,前期高位,前期高位,8,0),COLOR8000FF;\\nJRH:=HHV(C,2); \\nJRL:=LLV(C,2); \\nVAR01:=(CLOSE&gt;REF(CLOSE,1) AND CLOSE&gt;REF(CLOSE,2)); \\nVAR02:=(REF(VAR01,1) AND CLOSE&lt;=REF(CLOSE,1) AND CLOSE&gt;=REF(CLOSE,2)); \\nVAR03:=(REF(VAR02,1) AND CLOSE&gt;=REF(CLOSE,1) AND CLOSE&lt;=REF(CLOSE,2)); \\nVAR04:=(REF(VAR03,1) AND CLOSE&lt;=REF(CLOSE,1) AND CLOSE&gt;=REF(CLOSE,2)); \\nVAR05:=(REF(VAR04,1) AND CLOSE&gt;=REF(CLOSE,1) AND CLOSE&lt;=REF(CLOSE,2)); \\nVAR06:=(REF(VAR05,1) AND CLOSE&lt;=REF(CLOSE,1) AND CLOSE&gt;=REF(CLOSE,2)); \\nVAR07:=(REF(VAR06,1) AND CLOSE&gt;=REF(CLOSE,1) AND CLOSE&lt;=REF(CLOSE,2)); \\nVAR08:=(REF(VAR07,1) AND CLOSE&lt;=REF(CLOSE,1) AND CLOSE&gt;=REF(CLOSE,2)); \\nVAR09:=(REF(VAR08,1) AND CLOSE&gt;=REF(CLOSE,1) AND CLOSE&lt;=REF(CLOSE,2)); \\nVARA:=(REF(VAR09,1) AND CLOSE&lt;=REF(CLOSE,1) AND CLOSE&gt;=REF(CLOSE,2)); \\nVARB:=(REF(VARA,1) AND CLOSE&gt;=REF(CLOSE,1) AND CLOSE&lt;=REF(CLOSE,2)); \\nVARC:=(REF(VARB,1) AND CLOSE&lt;=REF(CLOSE,1) AND CLOSE&gt;=REF(CLOSE,2)); \\nVARD:=(CLOSE&lt;REF(CLOSE,1) AND CLOSE&lt;REF(CLOSE,2)); \\nVARE:=(REF(VARD,1) AND CLOSE&gt;=REF(CLOSE,1) AND CLOSE&lt;=REF(CLOSE,2)); \\nVARF:=(REF(VARE,1) AND CLOSE&lt;=REF(CLOSE,1) AND CLOSE&gt;=REF(CLOSE,2)); \\nVAR010:=(REF(VARF,1) AND CLOSE&gt;=REF(CLOSE,1) AND CLOSE&lt;=REF(CLOSE,2)); \\nVAR011:=(REF(VAR010,1) AND CLOSE&lt;=REF(CLOSE,1) AND CLOSE&gt;=REF(CLOSE,2)); \\nVAR012:=(REF(VAR011,1) AND CLOSE&gt;=REF(CLOSE,1) AND CLOSE&lt;=REF(CLOSE,2)); \\nVAR013:=(REF(VAR012,1) AND CLOSE&lt;=REF(CLOSE,1) AND CLOSE&gt;=REF(CLOSE,2)); \\nVAR014:=(REF(VAR013,1) AND CLOSE&gt;=REF(CLOSE,1) AND CLOSE&lt;=REF(CLOSE,2)); \\nVAR015:=(REF(VAR014,1) AND CLOSE&lt;=REF(CLOSE,1) AND CLOSE&gt;=REF(CLOSE,2)); \\nVAR016:=(REF(VAR015,1) AND CLOSE&gt;=REF(CLOSE,1) AND CLOSE&lt;=REF(CLOSE,2)); \\nVAR017:=(REF(VAR016,1) AND CLOSE&lt;=REF(CLOSE,1) AND CLOSE&gt;=REF(CLOSE,2)); \\nVAR018:=(REF(VAR017,1) AND CLOSE&gt;=REF(CLOSE,1) AND CLOSE&lt;=REF(CLOSE,2)); \\nVAR019:=((REF(VARD OR VARE OR VARF OR VAR010 OR VAR011 OR VAR012 OR VAR013 OR VAR014 OR VAR015 OR VAR016 OR VAR017 OR VAR018,1)) AND VAR01); \\nVAR1A:=((REF(VAR01 OR VAR02 OR VAR03 OR VAR04 OR VAR05 OR VAR06 OR VAR07 OR VAR08 OR VAR09 OR VARA OR VARB OR VARC,1)) AND VARD); \\n红色持股:=VAR01 OR VAR02 OR VAR03 OR VAR04 OR VAR05 OR VAR06 OR VAR07 OR VAR08 OR VAR09 OR VARA OR VARB OR VARC,COLOR0000FF,NODRAW;\\n离场:=IF(红色持股,JRL,DRAWNULL); \\n明离场价:=离场,COLORFF99FF,NODRAW;\\n青色观望:=VARD OR VARE OR VARF OR VAR010 OR VAR011 OR VAR012 OR VAR013 OR VAR014 OR VAR015 OR VAR016 OR VAR017 OR VAR018,COLORFFFF00,NODRAW; \\n进:=IF(青色观望,JRH,DRAWNULL);\\n今离场价:REF(离场,1),COLOR0000FF,NODRAW; \\n明进场价:=进,COLOR33AACC,NODRAW; \\n今进场价:REF(明进场价,1),COLORGREEN,NODRAW;\\n上涨家数:INDEXADV,COLOR0080FF,NODRAW;\\n下跌家数:INDEXDEC,COLORGREEN,NODRAW;\\n五日乖离率:=(C-MA5)/MA5*100;\\nBB5:=ATAN((MA5/REF(MA5,1)-1)*100)*180/3.1416;\\n速度5:=SMA(EMA((MA5-REF(MA5,1))/REF(MA5,1),3)*100,3,1);\\n加速度5:=EMA((速度5-REF(速度5,1)),3),NODRAW;\\nIF(BB5&gt;30 AND MA5&gt;REF(MA5,1), MA5,DRAWNULL),LINETHICK3,COLORRED;\\nBB10:=ATAN((MA10/REF(MA10,1)-1)*100)*180/3.1416;\\nIF(BB5&lt;0 AND MA5&lt;REF(MA5,1), MA5,DRAWNULL),LINETHICK3,COLORGREEN;\\n三拾日乖离率:=(C-MA30)/MA30*100,NODRAW;\\nVAR1:=(MA20-MA30)&gt;REF((MA20-MA30),1) AND MA20&gt;REF(MA20,1) AND MA30&gt;REF(MA30,1);\\nVAR2:=(MA30-MA20)&lt;REF((MA30-MA20),1) AND MA20&lt;REF(MA20,1) AND MA30&lt;REF(MA30,1);\\nBB30:=ATAN((MA30/REF(MA30,1)-1)*100)*180/3.1416;\\n强势狙击:=FILTER(BB30&gt;30 AND BB10&gt;45 AND CROSS(BB5,60),10);\\n加仓:=FILTER(COUNT(CROSS(BB5,30),5)&gt;=1 AND MA5&gt;REF(MA5,1) AND 三拾日乖离率&gt;REF(三拾日乖离率,1) AND MA10&gt;REF(MA10,1)\\nAND 加速度5&gt;REF(加速度5,1) AND 速度5&gt;REF(速度5,1),10);\\n清仓:=FILTER(COUNT(CROSS(30,BB5),5)&gt;=1 AND (C&gt;MA30 OR O&gt;MA30) AND MA5&lt;REF(MA5,1) AND 三拾日乖离率&lt;REF(三拾日乖离率,1) AND MA10&lt;REF(MA10,1),10);\\nDRAWTEXT(加仓 ,LOW*0.96,'加'),COLORYELLOW;\\nJC:=CROSS(0,五日乖离率) AND 三拾日乖离率&lt;REF(三拾日乖离率,1) AND MA10&gt;REF(MA10,1) ;\\n减仓:=FILTER(JC,10);\\nMR:=COUNT(CROSS(五日乖离率,0),3)&gt;=1 AND 三拾日乖离率&gt;REF(三拾日乖离率,1) AND MA5&gt;REF(MA5,1) AND (C/REF(C,1)-1)*100&gt;5 AND REF(C,1)&lt;MA30;\\n买入:=FILTER(MR,10);\\nDRAWTEXT(减仓,HIGH*1.01,'←风险'),COLORCYAN;\\nDRAWTEXT(买入,LOW*0.99,'买'),COLORYELLOW;\\nDRAWTEXT(清仓 ,HIGH*1.02,'←清仓'),COLORGREEN;\\nDRAWTEXT(强势狙击,LOW*0.98,'←狙击'),COLORWHITE;\\nVAR21:=MAX(ABS(HIGH-AMOUNT/VOL/100),ABS(AMOUNT/VOL/100-LOW));\\nVAR3:=ABS((OPEN+CLOSE)/2-AMOUNT/VOL/100);\\nMV:=(VAR21+VAR3)/AMOUNT*VOL*100*50;\\n压力:MA(REF(HHV(C,30),1),2),COLORABFF46;\\n支撑:MA(REF(LLV(C,30),1),2),COLOR9DFFFF;\\n总额:=AMOUNT;\\n买:=IF(O=C AND (C-REF(C,1))/REF(C,1)*100&gt;9.8,AMOUNT,AMOUNT/((H-L)*2-ABS(O-C))*(C-L));\\n买%:=买/AMOUNT*100;\\n流入:=AMOUNT*买%/10000000000;\\n流出:=AMOUNT/100000000-流入;\\n净流:=(流入-流出);\\n总额3:=SUM(AMOUNT,3);\\n流入3:=SUM(流入,3);\\n流出3:=SUM(流出,3);\\n净流3:=SUM(流入-流出,3);\\n总额5:=SUM(AMOUNT,5);\\n流入5:=SUM(流入,5);\\n流出5:=SUM(流出,5);\\n净流5:=SUM(流入-流出,5);\\n总额10:=SUM(AMOUNT,10);\\n流入10:=SUM(流入,10);\\n流出10:=SUM(流出,10);\\n净流10:=SUM(流入-流出,10);\\n画:=CONST(FINDHIGH(总额10,0,190,1));\\nDRAWTEXT_FIX(1,0.00,0,0,'所属行业：')COLOR00FFFF;\\nDRAWTEXT_FIX(1,0.06,0,0,HYBLOCK)COLOR00FFFF;\\nDRAWTEXT_FIX(1,0.14,0,0,'所属地区：')COLOR00FFFF;\\nDRAWTEXT_FIX(1,0.20,0,0,DYBLOCK)COLOR00FFFF;\\nDRAWTEXT_FIX(1,0.30,0.00,0,'主题投资：')COLOR00FFFF;\\nDRAWTEXT_FIX(1,0.36,0.00,0,EXTERNSTR(0,2))COLOR00FFFF;\\nDRAWTEXT_FIX(1,0.00,0.05,0,'主营业务：')COLOR00FFFF;\\nDRAWTEXT_FIX(1,0.06,0.05,0,EXTERNSTR(0,3))COLOR00FFFF;\\nDRAWTEXT_FIX(1,0.00,0.10,0,'解禁日期：')COLOR00FFFF;\\nDRAWTEXT_FIX(1,0.06,0.10,0,EXTERNSTR(0,4))COLOR00FFFF;\\nDRAWTEXT_FIX(1,0.00,0.15,0,'莸利比例:'),COLORYELLOW;\\nDRAWNUMBER_FIX(1,0.06,0.15,0,CONST(WINNER(C )*100)),COLOR0080FF;\\nDRAWTEXT_FIX(1,0.12,0.15,0,'动态PE:'),COLORYELLOW;\\nDRAWNUMBER_FIX(1,0.17,0.15,0,CONST(DYNAINFO(39))),COLOR0080FF;\\nDRAWTEXT_FIX(1,0.22,0.15,0,'市值:'),COLORYELLOW;\\nDRAWNUMBER_FIX(1,0.26,0.15,0,FINANCE(40)/100000000),COLOR0080FF;\\nDRAWTEXT_FIX (1,0.31,0.15,0,'公积金(股):'),COLORYELLOW;\\nDRAWNUMBER_FIX(1,0.38,0.15,0,FINANCE(18)),COLOR0080FF;\\nDRAWTEXT_FIX (1,0.43,0.15,0,'收益:'),COLORYELLOW;\\nDRAWNUMBER_FIX(1,0.47,0.15,0,FINANCE(33)),COLOR0080FF;\\nDRAWTEXT_FIX(1,0.00,0.19,0,'净流入(亿):'),COLORYELLOW;\\nDRAWTEXT_FIX(1,0.06,0.19,0,'1日'),COLORYELLOW;\\nDRAWTEXT_FIX(1,0.12,0.19,0,'3日'),COLORYELLOW;\\nDRAWTEXT_FIX(1,0.18,0.19,0,'5日'),COLORYELLOW;\\nDRAWTEXT_FIX(1,0.24,0.19,0,'10日'),COLORYELLOW;\\nDRAWNUMBER_FIX(1,0.08,0.19,0,CONST((净流))),COLOR0080FF;\\nDRAWNUMBER_FIX(1,0.14,0.19,0,CONST((净流3))),COLOR0080FF;\\nDRAWNUMBER_FIX(1,0.20,0.19,0,CONST((净流5))),COLOR0080FF;\\nDRAWNUMBER_FIX(1,0.265,0.19,0,CONST((净流10))),COLOR0080FF;\\nDRAWTEXT_FIX(1,0.00,0.23,0,'愚民导向：'),COLOR00FFFF;\\nDRAWTEXT_FIX(1,0.06,0.23,0,EXTERNSTR(0,5)),COLOR00FFFF;\\nDRAWRECTREL(0,500,147,999.4,IF(120,RGB(10,0,0),0));\\n超B:=L2_AMO(0,2)/10000.0;\\n大B:=L2_AMO(1,2)/10000.0;\\n中B:=L2_AMO(2,2)/10000.0;\\n小B:=L2_AMO(3,2)/10000.0;\\n超S:=L2_AMO(0,3)/10000.0;\\n大S:=L2_AMO(1,3)/10000.0;\\n中S:=L2_AMO(2,3)/10000.0;\\n小S:=L2_AMO(3,3)/10000.0;\\nTESTSKIP(NOT(超B OR 大B OR 中B OR 小B OR 超S OR 大S OR 中S OR 小S)!=0);\\n大宗进:=(超B)+(大B),NODRAW;\\n大宗出:=(超S)+(大S),NODRAW;\\n非大宗进:=(中B)+(小B),NODRAW;\\n非大宗出:=(中S)+(小S),NODRAW;\\n大宗进限制:=IF((超B+大B)=0,0,大宗进);\\n大宗出限制:=IF((超S+大S)=0,0,大宗出);\\n非大宗进限制:=IF(中B+小B=0,0,非大宗进);\\n非大宗出限制:=IF(中S+小S=0,0,非大宗出);\\n主力净流入:=(超B+大B)-(超S+大S),COLORRED,NODRAW;\\n散户净流入:=(中B+小B)-(中S+小S),COLORRED,NODRAW;\\n净流入:=(超B+大B+中B+小B)-(超S+大S+中S+小S),COLORRED,NODRAW;\\n大单流入:=(超B+大B)/(超B+大B+超S+大S)*100,NODRAW;\\n大单流入限制:=IF((超B+大B+超S+大S)=0,0,大单流入);\\n大单流出比:=(超S+大S)/(超B+大B+超S+大S)*100,NODRAW;\\n大单流出限制:=IF((超B+大B+超S+大S)=0,0,大单流出比);\\n总流入比:=(超B+大B+中B+小B)/(超B+大B+中B+小B+超S+大S+中S+小S)*100,NODRAW;\\n总流出比:=(超S+大S+中S+小S)/(超B+大B+中B+小B+超S+大S+中S+小S)*100,NODRAW;\\n成交总量:=(超B+大B+中B+小B+超S+大S+中S+小S),NODRAW;\\n机构参与度:=(超B+超S+大B+大S)/成交总量*100,COLORYELLOW,NODRAW;\\n大单强度:=(超B+大B-超S-大S)/成交总量*100,COLORYELLOW,NODRAW;\\n大单强度限制:=IF(大单强度=0,-100,大单强度);\\n大单强度比:=IF(大单强度&gt;=0,(大单强度限制+100)/2,100-ABS((大单强度限制-100)/2)),NODRAW;\\n超单强度:=(超B-超S)/(超B+超S)*100,COLORYELLOW,NODRAW;\\n超单强度限制:=IF(超单强度=0,-100,超单强度);\\n超单强度比:=IF(超单强度&gt;0,(超单强度限制+100)/2,IF(超单强度&lt;0,100-ABS((超单强度限制-100)/2),0)),NODRAW;\\nDAZHIV:=CONST(MAX(ABS(大宗进),MAX(ABS(大宗出),MAX(ABS(非大宗进),ABS(非大宗出))))),NODRAW;\\nDRAWRECTREL(0,CONST(930-(ABS(大宗进)*250/DAZHIV)),35,950,IF(CONST(大宗进&gt;0),RGB(255,0,0),RGB(23,125,255)));\\nDRAWRECTREL(37,CONST(930-(ABS(大宗出)*250/DAZHIV)),72,950,IF(CONST(大宗出&gt;0),RGB(23,125,255),RGB(255,0,0)));\\nDRAWRECTREL(75,CONST(930-(ABS(非大宗进)*250/DAZHIV)),110,950,IF(CONST(非大宗进&gt;0),RGB(255,0,0),RGB(23,125,255)));\\nDRAWRECTREL(112,CONST(930-(ABS(非大宗出)*250/DAZHIV)),147,950,IF(CONST(非大宗出&gt;0),RGB(23,125,255),RGB(255,0,0)));\\nDRAWRECTREL(150,CONST(940-(ABS(净流入)*250/DAZHIV))-20,190,950,IF(CONST(净流入&gt;0),RGB(200,0,0),RGB(0,125,50)));\\nDRAWTEXT_FIX(CURRBARSCOUNT=1,0.0001,0.9,0,STRCAT('',CON2STR(大宗进/1,0))),COLORYELLOW;\\nDRAWTEXT_FIX(CURRBARSCOUNT=1,0.036,0.9,0,STRCAT('',CON2STR(大宗出/1,0))),COLORYELLOW;\\nDRAWTEXT_FIX(CURRBARSCOUNT=1,0.074,0.9,0,STRCAT('',CON2STR(非大宗进/1,0))),COLORYELLOW;\\nDRAWTEXT_FIX(CURRBARSCOUNT=1,0.111,0.9,0,STRCAT('',CON2STR(非大宗出/1,0))),COLORYELLOW;\\nDRAWTEXT_FIX(CURRBARSCOUNT=1,0.150,0.9,0,STRCAT('',CON2STR(净流入/1,0))),COLORYELLOW;\\nDRAWTEXT_FIX(1,0.000,0.99,0,STRCAT(STRCAT('主力 ',CON2STR(主力净流入,0)),'万')),COLORMAGENTA;\\nDRAWTEXT_FIX(1,0.078,0.99,0,STRCAT(STRCAT('散户 ',CON2STR(散户净流入,0)),'万')),COLORCYAN;\\nDRAWTEXT_FIX(CURRBARSCOUNT=1,0.145,0.99,0,'净流入:(万)'),COLORYELLOW;\\n主力买力度:=LARGEINTRDVOL*1000/VOL;\\n主力卖力度:=LARGEOUTTRDVOL*1000/VOL;\\nAAD:=CONST(MAX(ABS(主力买力度),ABS(主力卖力度)))*4,NODRAW;\\nDRAWRECTREL(0,515,CONST(ABS(主力买力度)*560/AAD),568,IF(CONST(主力买力度)&gt;0,RGB(255,0,0),RGB(0,50,0)));\\nDRAWRECTREL(0,570,CONST(ABS(主力卖力度)*560/AAD),623,IF(CONST(主力卖力度)&gt;0,RGB(0,50,0),RGB(255,0,0)));\\nDRAWTEXT_FIX(1,0,0.524,0,STRCAT('主买力度:',CON2STR(主力买力度,0))),COLORYELLOW;\\nDRAWTEXT_FIX(1,0,0.576,0,STRCAT('主卖力度:',CON2STR(主力卖力度,0))),COLORYELLOW;\\n{DDE显示}\\nDDX:=(LARGEINTRDVOL-LARGEOUTTRDVOL)*1000/FINANCE(7);\\nDDY:=IF(TRADENUM&gt;0,(TRADEOUTNUM-TRADEINNUM)*100/TRADENUM,0);\\nDDZ:=IF(TRADENUM&gt;0,(LARGETRDINNUM-LARGETRDOUTNUM)/TRADENUM*100,0);\\nDRAWRECTREL(150,500,192,540,IF(CONST(DDX)&gt;0,RGB(255,0,0),RGB(0,50,0)));\\nDRAWRECTREL(150,545,192,585,IF(CONST(DDY)&gt;0,RGB(255,0,0),RGB(0,50,0)));\\nDRAWRECTREL(150,590,192,630,IF(CONST(DDZ)&gt;0,RGB(255,0,0),RGB(0,50,0)));\\nDRAWTEXT_FIX(1,0.153,0.500,0,STRCAT('DDX:',CON2STR(DDX,1))),COLORYELLOW,COLORWHITE;\\nDRAWTEXT_FIX(1,0.153,0.548,0,STRCAT('DDY:',CON2STR(DDY,1))),COLORYELLOW,COLORWHITE;\\nDRAWTEXT_FIX(1,0.153,0.596,0,STRCAT('DDZ:',CON2STR(DDZ,1))),COLORYELLOW,COLORWHITE;\\nT1:=IF (DDX&gt;0 AND REF(DDX,1)&lt;0,1,0);\\nT2:=IF (DDX&gt;0 AND REF(DDX,1)&gt;0 AND REF(DDX,2)&lt;0,2,T1);\\nT3:=IF (DDX&gt;0 AND REF(DDX,1)&gt;0 AND REF(DDX,2)&gt;0 AND REF(DDX,3)&lt;0,3,T2);\\nT4:=IF (DDX&gt;0 AND REF(DDX,1)&gt;0 AND REF(DDX,2)&gt;0 AND REF(DDX,3)&gt;0 AND REF(DDX,4)&lt;0,4,T3);\\nT5:=IF (DDX&gt;0 AND REF(DDX,1)&gt;0 AND REF(DDX,2)&gt;0 AND REF(DDX,3)&gt;0 AND REF(DDX,4)&gt;0 AND REF(DDX,5)&lt;0,5,T4);\\nT6:=IF (DDX&gt;0 AND REF(DDX,1)&gt;0 AND REF(DDX,2)&gt;0 AND REF(DDX,3)&gt;0 AND REF(DDX,4)&gt;0 AND REF(DDX,5)&gt;0 AND REF(DDX,6)&lt;0,6,T5);\\nT7:=IF (DDX&gt;0 AND REF(DDX,1)&gt;0 AND REF(DDX,2)&gt;0 AND REF(DDX,3)&gt;0 AND REF(DDX,4)&gt;0 AND REF(DDX,5)&gt;0 AND REF(DDX,6)&gt;0 AND REF(DDX,7)&lt;0,7,T6);\\nT8:=IF (DDX&gt;0 AND REF(DDX,1)&gt;0 AND REF(DDX,2)&gt;0 AND REF(DDX,3)&gt;0 AND REF(DDX,4)&gt;0 AND REF(DDX,5)&gt;0 AND REF(DDX,6)&gt;0 AND REF(DDX,7)&gt;0 AND REF(DDX,8)&lt;0,8,T7);\\nT9:=IF (DDX&gt;0 AND REF(DDX,1)&gt;0 AND REF(DDX,2)&gt;0 AND REF(DDX,3)&gt;0 AND REF(DDX,4)&gt;0 AND REF(DDX,5)&gt;0 AND REF(DDX,6)&gt;0 AND REF(DDX,7)&gt;0 AND REF(DDX,8)&gt;0 AND REF(DDX,9)&lt;0,9,T8);\\nT:=IF (DDX&gt;0 AND REF(DDX,1)&gt;0 AND REF(DDX,2)&gt;0 AND REF(DDX,3)&gt;0 AND REF(DDX,4)&gt;0 AND REF(DDX,5)&gt;0 AND REF(DDX,6)&gt;0 AND REF(DDX,7)&gt;0 AND REF(DDX,8)&gt;0 AND REF(DDX,9)&gt;0,10,T9);\\nDRAWTEXT_FIX(1,0.190,0.500,0,STRCAT(STRCAT(' ',CON2STR(T,0)),' [天] ')),COLORYELLOW;\\nT11:=IF (DDY&gt;0 AND REF(DDY,1)&lt;0,1,0);\\nT21:=IF (DDY&gt;0 AND REF(DDY,1)&gt;0 AND REF(DDY,2)&lt;0,2,T11);\\nT31:=IF (DDY&gt;0 AND REF(DDY,1)&gt;0 AND REF(DDY,2)&gt;0 AND REF(DDY,3)&lt;0,3,T21);\\nT41:=IF (DDY&gt;0 AND REF(DDY,1)&gt;0 AND REF(DDY,2)&gt;0 AND REF(DDY,3)&gt;0 AND REF(DDY,4)&lt;0,4,T31);\\nT51:=IF (DDY&gt;0 AND REF(DDY,1)&gt;0 AND REF(DDY,2)&gt;0 AND REF(DDY,3)&gt;0 AND REF(DDY,4)&gt;0 AND REF(DDY,5)&lt;0,5,T41);\\nT61:=IF (DDY&gt;0 AND REF(DDY,1)&gt;0 AND REF(DDY,2)&gt;0 AND REF(DDY,3)&gt;0 AND REF(DDY,4)&gt;0 AND REF(DDY,5)&gt;0 AND REF(DDY,6)&lt;0,6,T51);\\nT71:=IF (DDY&gt;0 AND REF(DDY,1)&gt;0 AND REF(DDY,2)&gt;0 AND REF(DDY,3)&gt;0 AND REF(DDY,4)&gt;0 AND REF(DDY,5)&gt;0 AND REF(DDY,6)&gt;0 AND REF(DDY,7)&lt;0,7,T61);\\nT81:=IF (DDY&gt;0 AND REF(DDY,1)&gt;0 AND REF(DDY,2)&gt;0 AND REF(DDY,3)&gt;0 AND REF(DDY,4)&gt;0 AND REF(DDY,5)&gt;0 AND REF(DDY,6)&gt;0 AND REF(DDY,7)&gt;0 AND REF(DDY,8)&lt;0,8,T71);\\nT91:=IF (DDY&gt;0 AND REF(DDY,1)&gt;0 AND REF(DDY,2)&gt;0 AND REF(DDY,3)&gt;0 AND REF(DDY,4)&gt;0 AND REF(DDY,5)&gt;0 AND REF(DDY,6)&gt;0 AND REF(DDY,7)&gt;0 AND REF(DDY,8)&gt;0 AND REF(DDY,9)&lt;0,9,T81);\\nTY01:=IF (DDY&gt;0 AND REF(DDY,1)&gt;0 AND REF(DDY,2)&gt;0 AND REF(DDY,3)&gt;0 AND REF(DDY,4)&gt;0 AND REF(DDY,5)&gt;0 AND REF(DDY,6)&gt;0 AND REF(DDY,7)&gt;0 AND REF(DDY,8)&gt;0 AND REF(DDY,9)&gt;0,10,T91);\\nDRAWTEXT_FIX(1,0.190,0.548,0,STRCAT(STRCAT(' ',CON2STR(TY01,0)),' [天] ')),COLORYELLOW;\\nT1Z:=IF (DDZ&gt;0 AND REF(DDZ,2)&lt;0,1,0);\\nT2Z:=IF (DDZ&gt;0 AND REF(DDZ,1)&gt;0 AND REF(DDZ,2)&lt;0,2,T1Z);\\nT3Z:=IF (DDZ&gt;0 AND REF(DDZ,1)&gt;0 AND REF(DDZ,2)&gt;0 AND REF(DDZ,3)&lt;0,3,T2Z);\\nT4Z:=IF (DDZ&gt;0 AND REF(DDZ,1)&gt;0 AND REF(DDZ,2)&gt;0 AND REF(DDZ,3)&gt;0 AND REF(DDZ,4)&lt;0,4,T3Z);\\nT5Z:=IF (DDZ&gt;0 AND REF(DDZ,1)&gt;0 AND REF(DDZ,2)&gt;0 AND REF(DDZ,3)&gt;0 AND REF(DDZ,4)&gt;0 AND REF(DDZ,5)&lt;0,5,T4Z);\\nT6Z:=IF (DDZ&gt;0 AND REF(DDZ,1)&gt;0 AND REF(DDZ,2)&gt;0 AND REF(DDZ,3)&gt;0 AND REF(DDZ,4)&gt;0 AND REF(DDZ,5)&gt;0 AND REF(DDZ,6)&lt;0,6,T5Z);\\nT7Z:=IF (DDZ&gt;0 AND REF(DDZ,1)&gt;0 AND REF(DDZ,2)&gt;0 AND REF(DDZ,3)&gt;0 AND REF(DDZ,4)&gt;0 AND REF(DDZ,5)&gt;0 AND REF(DDZ,6)&gt;0 AND REF(DDZ,7)&lt;0,7,T6Z);\\nT8Z:=IF (DDZ&gt;0 AND REF(DDZ,1)&gt;0 AND REF(DDZ,2)&gt;0 AND REF(DDZ,3)&gt;0 AND REF(DDZ,4)&gt;0 AND REF(DDZ,5)&gt;0 AND REF(DDZ,6)&gt;0 AND REF(DDZ,7)&gt;0 AND REF(DDZ,8)&lt;0,8,T7Z);\\nT9Z:=IF (DDZ&gt;0 AND REF(DDZ,1)&gt;0 AND REF(DDZ,2)&gt;0 AND REF(DDZ,3)&gt;0 AND REF(DDZ,4)&gt;0 AND REF(DDZ,5)&gt;0 AND REF(DDZ,6)&gt;0 AND REF(DDZ,7)&gt;0 AND REF(DDZ,8)&gt;0 AND REF(DDZ,9)&lt;0,9,T8Z);\\nTZ:=IF (DDZ&gt;0 AND REF(DDZ,1)&gt;0 AND REF(DDZ,2)&gt;0 AND REF(DDZ,3)&gt;0 AND REF(DDZ,4)&gt;0 AND REF(DDZ,5)&gt;0 AND REF(DDZ,6)&gt;0 AND REF(DDZ,7)&gt;0 AND REF(DDZ,8)&gt;0 AND REF(DDZ,9)&gt;0,10,T9Z);\\nDRAWTEXT_FIX(1,0.190,0.596,0,STRCAT(STRCAT(' ',CON2STR(TZ,0)),' [天] ')),COLORYELLOW;\\nDIF:=EMA(CLOSE,12)-EMA(CLOSE,26);\\nDEA:=EMA(DIF,9);\\nMACD:=(DIF-DEA)*2;\\nVAR113:=HHV(HIGH,60);\\nVAR114:=LLV(LOW,30);\\nVAR115:=(CLOSE-MA(CLOSE,32))/MA(CLOSE,32)*100;\\nVAR116:=(VAR113+VAR114+VAR115)/3;\\nVAR117:=EMA(VAR116,5);\\nK01:=EMA(VAR117,5)*2, COLORFF00FF;\\nD01:=EMA(K01,5), COLORWHITE;\\nJ01:=K01*3-D01*2, COLORYELLOW;\\nENTERLONG:=CROSS(K01,D01);\\nEXITLONG:=CROSS(D01,K01);\\nB01:=(DRAWICON((ZIG(3,5)&gt;REF(ZIG(3,5),1)) AND (REF(ZIG(3,5),1)&lt;=REF(ZIG(3,5),2))\\nAND (REF(ZIG(3,5),2)&lt;=REF(ZIG(3,5),3)),L*0.98,1))*D01*2/3;\\nB02:=IF(TROUGHBARS(3,15,1)=1 AND HIGH&gt;LOW+0.01,20,0);\\n必买:=(B01 AND B02) AND 净流入&gt;0;\\n必卖:=IF(PEAKBARS(3,15,1)=1,80,100),COLORGREEN,LINETHICK1;\\nQQ:=必卖=80;\\nB03:=((ZIG(3,5)&gt;REF(ZIG(3,5),1)) AND (REF(ZIG(3,5),1)&lt;=REF(ZIG(3,5),2)) AND (REF(ZIG(3,5),2)&lt;=REF(ZIG(3,5),3)));\\nV1:=EMA(CLOSE,60)-EMA(CLOSE,300);\\nV2:=EMA(V1,300);\\nV3:=(CLOSE-(LOW,8))/((HIGH,8)-LLV(LOW,8))*100;\\nV4:=SMA(V3,2,1),NODRAW;\\nV5:=SMA(V4,2,1),NODRAW;\\nV6:=CLOSE/REF(CLOSE,3)&gt;=1.1;\\nV7:=BACKSET(V6,3);\\n大涨:=(V7 AND COUNT(V7,3)=1);\\nDRAWICON(必买,L-0.16,11);\\nDRAWICON(大涨 AND 必买,L-0.16,9);\\nDRAWICON(大涨,L-0.18,1);\\nDRAWICON(QQ,H+0.1,6);\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}`);export{R as data};
