import{_ as p,X as e,Y as t,a1 as o,Z as n,$ as s,a2 as c,a0 as l,F as u}from"./framework-68dd73a2.js";const i="/blog/assets/Oracle_50_1.png",k={},r={id:"_50-oracle-sql开发-单行函数-md",tabindex:"-1"},d=n("a",{class:"header-anchor",href:"#_50-oracle-sql开发-单行函数-md","aria-hidden":"true"},"#",-1),m={href:"http://xn--bbrp6al11b316a.md",target:"_blank",rel:"noopener noreferrer"},v=l('<div class="hint-container warning"><p class="hint-container-title">注意</p><p>本博文仅供学术研究和交流参考，严禁将其用于商业用途。如因违规使用产生的任何法律问题，使用者需自行负责。</p></div><h4 id="概念" tabindex="-1"><a class="header-anchor" href="#概念" aria-hidden="true">#</a> 概念</h4><figure><img src="'+i+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ul><li><p>数值函数</p><ul><li><p>ROUND:将列或表达式所表示的数值四舍五入到小数点后的第n位。</p></li><li><p>格式: ROUND(column| expression, n) ROUND(45.926, 2) -&gt; 45.93</p></li><li><p>TRUNC:将列或表达式所表示的数值截取到小数点后的第n位。</p></li><li><p>格式：TRUNC(column| expression, n) TRUNC(45.926, 2) -&gt; 45.92</p></li><li><p>MOD:取m除以n后得到的余数</p></li><li><p>格式：MOD(m,n) MOD(1600, 300) -&gt;100</p></li><li><p>DUAL：是一张虚表，不能保存任何数据，只有一个字段，一行记录。当我们不希望从任何表中读取数据，同时又想利用SQL引擎中的计算表达式的能力帮我们运算时，就可以使用DUAL表。</p></li></ul></li></ul><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SQL</span><span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token function">ROUND</span><span class="token punctuation">(</span><span class="token number">45.923</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">ROUND</span><span class="token punctuation">(</span><span class="token number">45.923</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
 <span class="token number">2</span> <span class="token function">ROUND</span><span class="token punctuation">(</span><span class="token number">45.923</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
 <span class="token number">3</span> <span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>常用日期函数 <ul><li>SYSDATE：返回系统日期</li><li>MONTHS_BETWEEN：返回两个日期类型数据之间间隔的自然月数</li><li>ADD_MONTHS：返回指定日期加上相应的月数后的日期</li><li>NEXT_DAY：返回某一日期的下一个指定日期</li><li>LAST_DAY：返回指定日期当月最后一天的日期</li><li>ROUND(date[,‘fmt’])将date按照fmt指定的格式进行四舍五入，fmt为可选项，如果没有指定fmt，则默认为DD，将date四舍五入为最近的天。</li><li>格式码：世纪CC,年YY，月MM,日DD，小时HH24，分MI，秒SS</li><li>TRUNC(date[,‘fmt’])将date按照fmt指定的格式进行截断，fmt为可选项，如果没有指定fmt，则默认为‘DD’，将date截取为最近的天。</li><li>EXTRACT：返回日期类型数据中的年份、月份或者日。</li></ul></li></ul><h4 id="示例代码" tabindex="-1"><a class="header-anchor" href="#示例代码" aria-hidden="true">#</a> 示例代码</h4><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">--------------------------------------------------------------------------</span>
<span class="token comment">-- 字符函数 </span>
<span class="token comment">--------------------------------------------------------------------------</span>
<span class="token comment">----------------</span>
<span class="token comment">--大小写转换函数  lower   upper   initcap  </span>
<span class="token comment">----------------</span>
<span class="token comment">--lower() 转小写</span>
<span class="token keyword">select</span> empno<span class="token punctuation">,</span>ename<span class="token punctuation">,</span>job <span class="token keyword">from</span> emp <span class="token keyword">where</span> ename <span class="token operator">like</span> <span class="token string">&#39;a%&#39;</span> <span class="token operator">or</span> ename <span class="token operator">like</span> <span class="token string">&#39;A%&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> empno<span class="token punctuation">,</span>ename<span class="token punctuation">,</span>job<span class="token punctuation">,</span>lower<span class="token punctuation">(</span>ename<span class="token punctuation">)</span><span class="token punctuation">,</span>lower<span class="token punctuation">(</span>job<span class="token punctuation">)</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> lower<span class="token punctuation">(</span>ename<span class="token punctuation">)</span> <span class="token operator">like</span> <span class="token string">&#39;a%&#39;</span><span class="token punctuation">;</span><span class="token comment">--根据列名转换</span>

<span class="token keyword">select</span> <span class="token string">&#39;SQL Course&#39;</span><span class="token punctuation">,</span>lower<span class="token punctuation">(</span><span class="token string">&#39;SQL Course&#39;</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span><span class="token comment">--根据变量或表达式转换  dual伪表 一行N列   sql course</span>

<span class="token comment">--upper() 转大写</span>
<span class="token keyword">select</span> <span class="token string">&#39;SQL Course&#39;</span><span class="token punctuation">,</span>upper<span class="token punctuation">(</span><span class="token string">&#39;SQL Course&#39;</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span><span class="token comment">--SQL COURSE</span>

<span class="token comment">--initCap() 首字母大写</span>
<span class="token keyword">select</span> <span class="token string">&#39;sql course&#39;</span><span class="token punctuation">,</span>Initcap<span class="token punctuation">(</span><span class="token string">&#39;sql course&#39;</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span><span class="token comment">--Sql Course</span>

<span class="token comment">----------------</span>
<span class="token comment">--字符处理函数  concat   substr  length   instr   lpad  rpad  trim  replace</span>
<span class="token comment">----------------</span>
<span class="token comment">--concat(参数一，参数二) 拼接字符串</span>
<span class="token keyword">select</span> ename <span class="token operator">||</span> <span class="token string">&#39; 的职位是 &#39;</span> <span class="token operator">||</span> job <span class="token keyword">from</span> emp<span class="token punctuation">;</span>  <span class="token comment">--SMITH 的职位是 CLERK</span>

<span class="token keyword">select</span> concat<span class="token punctuation">(</span>ename<span class="token punctuation">,</span><span class="token string">&#39; 的职位是 &#39;</span><span class="token punctuation">,</span>job<span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span><span class="token comment">--not ok 参数个数无效</span>
<span class="token keyword">select</span> concat<span class="token punctuation">(</span>concat<span class="token punctuation">(</span>ename<span class="token punctuation">,</span><span class="token string">&#39; 的职位是 &#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>job<span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span><span class="token comment">--ok</span>

<span class="token comment">--substr(参数一，参数二[,参数三]) 截取字符串,下标从1开始</span>
<span class="token comment">--   参数一：待截取的目标字符串</span>
<span class="token comment">--   参数二：开始位置</span>
<span class="token comment">--   参数三：截取长度，可省略，默认长度到最后</span>
<span class="token keyword">select</span> substr<span class="token punctuation">(</span><span class="token string">&#39;zr@neusoft.com&#39;</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>  <span class="token comment">--@neusoft.com</span>
<span class="token keyword">select</span> substr<span class="token punctuation">(</span><span class="token string">&#39;zr@neusoft.com&#39;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span><span class="token comment">--zr</span>

<span class="token keyword">select</span> substr<span class="token punctuation">(</span><span class="token string">&#39;zr@neusoft.com&#39;</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span> <span class="token comment">--.com</span>
<span class="token keyword">select</span> substr<span class="token punctuation">(</span><span class="token string">&#39;zr@neusoft.com&#39;</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span> <span class="token comment">--com</span>

<span class="token comment">--length() 获取字符串的长度</span>
<span class="token keyword">select</span> empno<span class="token punctuation">,</span>ename<span class="token punctuation">,</span>length<span class="token punctuation">(</span>ename<span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>

<span class="token keyword">select</span> length<span class="token punctuation">(</span><span class="token string">&#39;12ab中文&#39;</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>  <span class="token comment">--6</span>

<span class="token number">1.</span>写一个查询<span class="token punctuation">,</span>用首字母大写，其它字母小写显示雇员的 ename，
显示名字的长度，并给每列一个适当的标签<span class="token punctuation">(</span>别名<span class="token punctuation">)</span>，
条件是满足所有雇员名字的开始字母是J、A 或 M 的雇员，并对查询结果按雇员的ename升序排序。
（提示：使用initcap、length、substr）
<span class="token keyword">select</span> initCap<span class="token punctuation">(</span>ename<span class="token punctuation">)</span> 员工姓名<span class="token punctuation">,</span>length<span class="token punctuation">(</span>ename<span class="token punctuation">)</span> 姓名长度 <span class="token keyword">from</span> emp <span class="token keyword">where</span> substr<span class="token punctuation">(</span>ename<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">in</span><span class="token punctuation">(</span><span class="token string">&#39;J&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;A&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;M&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> initCap<span class="token punctuation">(</span>ename<span class="token punctuation">)</span> 员工姓名<span class="token punctuation">,</span>length<span class="token punctuation">(</span>ename<span class="token punctuation">)</span> 姓名长度 <span class="token keyword">from</span> emp <span class="token keyword">where</span> ename <span class="token operator">like</span> <span class="token string">&#39;A%&#39;</span> <span class="token operator">or</span> ename <span class="token operator">like</span> <span class="token string">&#39;J%&#39;</span> <span class="token operator">or</span> ename <span class="token operator">like</span>  <span class="token string">&#39;M%&#39;</span><span class="token punctuation">;</span>

<span class="token comment">--instr(参数一，参数二[,参数三][,参数四]) 查找指定字符的下标,如果字符不存在，返回0</span>
<span class="token comment">--     参数一：待查找的目标字符串</span>
<span class="token comment">--     参数二：查找的字符是谁</span>
<span class="token comment">--     参数三：开始位置,默认从1开始</span>
<span class="token comment">--     参数四：第N次出现的位置</span>
<span class="token keyword">select</span> instr<span class="token punctuation">(</span><span class="token string">&#39;zr@neusoft.com&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;@&#39;</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span> <span class="token comment">--3</span>
<span class="token keyword">select</span> instr<span class="token punctuation">(</span><span class="token string">&#39;zhaorong@neusoft.com&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;@&#39;</span><span class="token punctuation">)</span> <span class="token string">&quot;@符号的下标&quot;</span><span class="token punctuation">,</span>
       substr<span class="token punctuation">(</span><span class="token string">&#39;zhaorong@neusoft.com&#39;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>instr<span class="token punctuation">(</span><span class="token string">&#39;zhaorong@neusoft.com&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;@&#39;</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> 邮箱前缀 <span class="token keyword">from</span> dual<span class="token punctuation">;</span> <span class="token comment">--3,zhaorong</span>
       
<span class="token keyword">select</span> instr<span class="token punctuation">(</span><span class="token string">&#39;sql course&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;s&#39;</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span> <span class="token comment">--1</span>
<span class="token keyword">select</span> instr<span class="token punctuation">(</span><span class="token string">&#39;sql course&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;s&#39;</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span> <span class="token comment">--9</span>
<span class="token keyword">select</span> instr<span class="token punctuation">(</span><span class="token string">&#39;sql courses&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;s&#39;</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span> <span class="token comment">--11</span>

<span class="token comment">--lpad 左补全   V0000007369</span>
<span class="token keyword">select</span> empno<span class="token punctuation">,</span><span class="token string">&#39;V&#39;</span> <span class="token operator">||</span> lpad<span class="token punctuation">(</span>empno<span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">&#39;0&#39;</span><span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>     <span class="token comment">--V0000007369  假定长度为10，不足补0</span>
<span class="token keyword">select</span> empno<span class="token punctuation">,</span>concat<span class="token punctuation">(</span><span class="token string">&#39;V&#39;</span><span class="token punctuation">,</span>lpad<span class="token punctuation">(</span>empno<span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">&#39;0&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span><span class="token comment">--V0000007369</span>

<span class="token comment">--rpad 右补全</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>rpad<span class="token punctuation">(</span>ename<span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">&#39;*&#39;</span><span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span><span class="token comment">--SMITH*****</span>

<span class="token comment">--trim() 去首尾字符，默认去首尾空格</span>
<span class="token keyword">select</span> <span class="token string">&#39; SQL Course &#39;</span><span class="token punctuation">,</span>trim<span class="token punctuation">(</span><span class="token string">&#39; SQL Course &#39;</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span><span class="token comment">--默认去首尾空格</span>
<span class="token keyword">select</span> <span class="token string">&#39;ISQL CourseI&#39;</span><span class="token punctuation">,</span>trim<span class="token punctuation">(</span>leading <span class="token string">&#39;I&#39;</span> <span class="token keyword">from</span> <span class="token string">&#39;ISQL CourseI&#39;</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span><span class="token comment">--SQL CourseI 去首部字符</span>
<span class="token keyword">select</span> <span class="token string">&#39;ISQL CourseI&#39;</span><span class="token punctuation">,</span>trim<span class="token punctuation">(</span>trailing <span class="token string">&#39;I&#39;</span> <span class="token keyword">from</span> <span class="token string">&#39;ISQL CourseI&#39;</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span><span class="token comment">--ISQL Course 去尾部字符</span>
<span class="token keyword">select</span> <span class="token string">&#39;ISQL CourseI&#39;</span><span class="token punctuation">,</span>trim<span class="token punctuation">(</span>both <span class="token string">&#39;I&#39;</span> <span class="token keyword">from</span> <span class="token string">&#39;ISQL CourseI&#39;</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span><span class="token comment">--SQL Course   去首尾字符</span>

<span class="token comment">--replace(参数一，参数二，参数三) 替换字符串</span>
<span class="token comment">--     使用参数三替换参数二的值                </span>
<span class="token keyword">select</span> <span class="token string">&#39; SQL Course &#39;</span><span class="token punctuation">,</span><span class="token keyword">replace</span><span class="token punctuation">(</span><span class="token string">&#39; SQL Course &#39;</span><span class="token punctuation">,</span><span class="token string">&#39; &#39;</span><span class="token punctuation">,</span><span class="token string">&#39;&#39;</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token keyword">replace</span><span class="token punctuation">(</span><span class="token string">&#39;发表一个评论，中间带了敏感字符，谈到了党与习大大&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;习大大&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;***&#39;</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>

<span class="token comment">--练习</span>
<span class="token number">1.</span>查询员工姓名中包含大写或小写字母A的员工姓名。
<span class="token keyword">select</span> empno<span class="token punctuation">,</span>ename <span class="token keyword">from</span> emp <span class="token keyword">where</span> ename <span class="token operator">like</span> <span class="token string">&#39;%a%&#39;</span> <span class="token operator">or</span> ename <span class="token operator">like</span> <span class="token string">&#39;%A%&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> empno<span class="token punctuation">,</span>ename <span class="token keyword">from</span> emp <span class="token keyword">where</span> lower<span class="token punctuation">(</span>ename<span class="token punctuation">)</span> <span class="token operator">like</span> <span class="token string">&#39;%a%&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> empno<span class="token punctuation">,</span>ename<span class="token punctuation">,</span>lower<span class="token punctuation">(</span>ename<span class="token punctuation">)</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> instr<span class="token punctuation">(</span>lower<span class="token punctuation">(</span>ename<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&#39;a&#39;</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token number">2.</span>查询部门编号为<span class="token number">10</span>或<span class="token number">20</span>，入职日期在<span class="token number">81</span>年<span class="token number">5</span>月<span class="token number">1</span>日之后，并且姓名中包含大写字母A的员工姓名，员工姓名长度（提示，要求使用INSTR函数，不能使用<span class="token operator">like</span>进行判断<span class="token punctuation">)</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>length<span class="token punctuation">(</span>ename<span class="token punctuation">)</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> deptno <span class="token operator">in</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">and</span> hiredate <span class="token operator">&gt;</span> <span class="token string">&#39;1-5月-81&#39;</span> <span class="token operator">and</span> instr<span class="token punctuation">(</span>ename<span class="token punctuation">,</span><span class="token string">&#39;A&#39;</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span><span class="token number">0</span> <span class="token punctuation">;</span>

<span class="token number">3.</span>查询每个职工的编号<span class="token punctuation">,</span>姓名，工资
要求将查询到的数据按照一定的格式合并成一个字符串<span class="token punctuation">.</span>
前<span class="token number">10</span>位：编号<span class="token punctuation">,</span>不足部分用<span class="token operator">*</span>填充<span class="token punctuation">,</span>左对齐
中间<span class="token number">10</span>位：姓名，不足部分用<span class="token operator">*</span>填充<span class="token punctuation">,</span>左对齐
后<span class="token number">10</span>位：工资，不足部分用<span class="token operator">*</span>填充<span class="token punctuation">,</span>右对齐
<span class="token keyword">select</span> rpad<span class="token punctuation">(</span>empno<span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">&#39;*&#39;</span><span class="token punctuation">)</span> <span class="token operator">||</span> rpad<span class="token punctuation">(</span>ename<span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">&#39;*&#39;</span><span class="token punctuation">)</span> <span class="token operator">||</span> lpad<span class="token punctuation">(</span>sal<span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">&#39;*&#39;</span><span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>

<span class="token comment">--------------------------------------------------------------------------</span>
<span class="token comment">-- 数值函数 </span>
<span class="token comment">--------------------------------------------------------------------------</span>
<span class="token comment">--round() 四舍五入</span>
<span class="token keyword">select</span> <span class="token function">round</span><span class="token punctuation">(</span><span class="token number">45.926</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token number">45.926</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>      <span class="token comment">--46   45.93</span>
<span class="token keyword">select</span> <span class="token function">round</span><span class="token punctuation">(</span><span class="token number">455.926</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token number">455.926</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span><span class="token comment">--460	500</span>
<span class="token keyword">select</span> <span class="token function">round</span><span class="token punctuation">(</span><span class="token number">445.926</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token number">445.926</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span><span class="token comment">--450  400</span>

<span class="token comment">--trunc() 截断数字</span>
<span class="token keyword">select</span> trunc<span class="token punctuation">(</span><span class="token number">45.926</span><span class="token punctuation">)</span><span class="token punctuation">,</span>trunc<span class="token punctuation">(</span><span class="token number">45.926</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>      <span class="token comment">--45   45.92</span>
<span class="token keyword">select</span> trunc<span class="token punctuation">(</span><span class="token number">455.926</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>trunc<span class="token punctuation">(</span><span class="token number">455.926</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span><span class="token comment">--450	400</span>
<span class="token keyword">select</span> trunc<span class="token punctuation">(</span><span class="token number">445.926</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>trunc<span class="token punctuation">(</span><span class="token number">445.926</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span><span class="token comment">--440  400</span>

<span class="token comment">--mod() 取余，求模</span>
<span class="token keyword">select</span> <span class="token function">mod</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span><span class="token comment">--1</span>

<span class="token comment">--------------------------------------------------------------------------</span>
<span class="token comment">-- 日期函数 </span>
<span class="token comment">--     日期加减运算时，单位以&quot;天&quot;来计算</span>
<span class="token comment">--------------------------------------------------------------------------</span>
<span class="token comment">--sysdate 返回系统当前日期</span>
<span class="token keyword">select</span> sysdate <span class="token keyword">from</span> dual<span class="token punctuation">;</span> <span class="token comment">--2019/8/20 14:48:53</span>

<span class="token number">1.</span>查询员工的入职日期，转正日期<span class="token punctuation">(</span><span class="token number">6</span>个月试用期<span class="token punctuation">)</span>，入职天数，入职星期数等
<span class="token keyword">select</span> empno<span class="token punctuation">,</span>
       ename<span class="token punctuation">,</span>
       hiredate 入职日期<span class="token punctuation">,</span>
       hiredate <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">6</span> <span class="token operator">*</span> <span class="token number">30</span><span class="token punctuation">)</span> 转正日期<span class="token punctuation">,</span>
       <span class="token punctuation">(</span>sysdate <span class="token operator">-</span> hiredate<span class="token punctuation">)</span> 入职天数<span class="token punctuation">,</span>
       <span class="token punctuation">(</span>sysdate <span class="token operator">-</span> hiredate<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">7</span> 入职星期数
  <span class="token keyword">from</span> emp<span class="token punctuation">;</span>

<span class="token comment">--months_between：返回两个日期类型数据之间间隔的自然月数</span>
<span class="token number">1.</span>查询员工的入职日期，入职月数
<span class="token keyword">select</span> empno<span class="token punctuation">,</span>ename<span class="token punctuation">,</span>hiredate 入职日期<span class="token punctuation">,</span>months_between<span class="token punctuation">(</span>sysdate<span class="token punctuation">,</span>hiredate<span class="token punctuation">)</span> 入职月数 <span class="token keyword">from</span> emp
<span class="token keyword">select</span> months_between<span class="token punctuation">(</span><span class="token string">&#39;1-12月-81&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;15-8月-81&#39;</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span> <span class="token comment">--3.54838709677419</span>
 
<span class="token comment">--add_months：返回指定日期加上相应的月数后的日期</span>
<span class="token number">1.</span>查询员工的入职日期，转正日期<span class="token punctuation">(</span><span class="token number">6</span>个月试用期<span class="token punctuation">)</span>
<span class="token keyword">select</span> empno<span class="token punctuation">,</span>ename<span class="token punctuation">,</span>hiredate 入职日期<span class="token punctuation">,</span>add_months<span class="token punctuation">(</span>hiredate<span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span> 转正日期  <span class="token keyword">from</span> emp<span class="token punctuation">;</span>

<span class="token comment">--next_day：返回某一日期的下一个指定日期 </span>
<span class="token keyword">select</span> next_day<span class="token punctuation">(</span>sysdate<span class="token punctuation">,</span><span class="token string">&#39;星期二&#39;</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span><span class="token comment">--2019/8/27 15:10:30</span>

<span class="token comment">--last_day：返回指定日期当月最后一天的日期</span>
<span class="token keyword">select</span> last_day<span class="token punctuation">(</span>sysdate<span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span><span class="token comment">--2019/8/31 15:11:10</span>

<span class="token comment">--round：四舍五入日期</span>
<span class="token keyword">select</span> sysdate<span class="token punctuation">,</span>         <span class="token comment">--2019/8/20 15:12:23</span>
       <span class="token function">round</span><span class="token punctuation">(</span>sysdate<span class="token punctuation">)</span><span class="token punctuation">,</span>   <span class="token comment">--2019/8/21  根据1-12 与13-24小时制判断</span>
       <span class="token function">round</span><span class="token punctuation">(</span>sysdate<span class="token punctuation">,</span><span class="token string">&#39;year&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment">--2020/1/1  根据1-6 与 7-12月份判断</span>
       <span class="token function">round</span><span class="token punctuation">(</span>sysdate<span class="token punctuation">,</span><span class="token string">&#39;month&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">--2019/9/1   根据1-15 与 16-30天数判断</span>
       <span class="token function">round</span><span class="token punctuation">(</span>sysdate<span class="token punctuation">,</span><span class="token string">&#39;day&#39;</span><span class="token punctuation">)</span>    <span class="token comment">--2019/8/18  根据1-3 与 4-7 星期判断</span>
<span class="token keyword">from</span> dual<span class="token punctuation">;</span>


<span class="token comment">--trunc：截断日期</span>
<span class="token keyword">select</span> sysdate<span class="token punctuation">,</span>         <span class="token comment">--2019/8/20 15:12:23</span>
       trunc<span class="token punctuation">(</span>sysdate<span class="token punctuation">)</span><span class="token punctuation">,</span>   <span class="token comment">--2019/8/20</span>
       trunc<span class="token punctuation">(</span>sysdate<span class="token punctuation">,</span><span class="token string">&#39;year&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment">--2019/1/1</span>
       trunc<span class="token punctuation">(</span>sysdate<span class="token punctuation">,</span><span class="token string">&#39;month&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">--2019/8/1</span>
       trunc<span class="token punctuation">(</span>sysdate<span class="token punctuation">,</span><span class="token string">&#39;day&#39;</span><span class="token punctuation">)</span>    <span class="token comment">--2019/8/18</span>
<span class="token keyword">from</span> dual<span class="token punctuation">;</span>

<span class="token comment">--extract 抽取年、月、日</span>
<span class="token keyword">select</span> sysdate<span class="token punctuation">,</span>
       extract<span class="token punctuation">(</span><span class="token keyword">year</span> <span class="token keyword">from</span> sysdate<span class="token punctuation">)</span> 年份<span class="token punctuation">,</span> <span class="token comment">--2019</span>
       extract<span class="token punctuation">(</span><span class="token keyword">month</span> <span class="token keyword">from</span> sysdate<span class="token punctuation">)</span> 月份<span class="token punctuation">,</span><span class="token comment">--8</span>
       extract<span class="token punctuation">(</span><span class="token keyword">day</span> <span class="token keyword">from</span> sysdate<span class="token punctuation">)</span> 日     <span class="token comment">--20</span>
  <span class="token keyword">from</span> dual<span class="token punctuation">;</span>

<span class="token comment">--------------------------------------------------------------------------</span>
<span class="token comment">-- 转换函数   to_char()  to_date()  to_number()</span>
<span class="token comment">--------------------------------------------------------------------------</span>
<span class="token comment">--to_char() 用于日期型  日期 -&gt; 字符</span>
<span class="token keyword">select</span> sysdate <span class="token keyword">from</span> dual<span class="token punctuation">;</span>          <span class="token comment">--2019/8/20 15:51:12</span>
<span class="token keyword">select</span> to_char<span class="token punctuation">(</span>sysdate<span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span> <span class="token comment">--20-8月 -19</span>

<span class="token keyword">select</span> to_char<span class="token punctuation">(</span>sysdate<span class="token punctuation">,</span><span class="token string">&#39;yyyy/mm/dd hh12:mi:ss&#39;</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span> <span class="token comment">--2019/08/20 03:53:10    hh12十二小时制</span>
<span class="token keyword">select</span> to_char<span class="token punctuation">(</span>sysdate<span class="token punctuation">,</span><span class="token string">&#39;yyyy/mm/dd hh24:mi:ss&#39;</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span> <span class="token comment">--2019/08/20 15:53:33    hh24二十四小时制</span>

<span class="token keyword">select</span> to_char<span class="token punctuation">(</span>sysdate<span class="token punctuation">,</span><span class="token string">&#39;yyyy-mm-dd hh24:mi:ss&#39;</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span> <span class="token comment">--2019-08-20 15:54:11</span>

<span class="token keyword">select</span> to_char<span class="token punctuation">(</span>sysdate<span class="token punctuation">,</span><span class="token string">&#39;yyyy年mm月dd日 hh24:mi:ss&#39;</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span> <span class="token comment">--not ok 日期格式无法识别 ,汉字需要使用&quot;&quot; 双引号括起来 </span>
<span class="token keyword">select</span> to_char<span class="token punctuation">(</span>sysdate<span class="token punctuation">,</span><span class="token string">&#39;yyyy&quot;年&quot;mm&quot;月&quot;dd&quot;日&quot; hh24:mi:ss&#39;</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span> <span class="token comment">--ok 2019年08月20日 15:56:09</span>

<span class="token keyword">select</span> 
       to_char<span class="token punctuation">(</span>sysdate<span class="token punctuation">,</span><span class="token string">&#39;year&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">--twenty nineteen</span>
       to_char<span class="token punctuation">(</span>sysdate<span class="token punctuation">,</span><span class="token string">&#39;month&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">--8月</span>
       to_char<span class="token punctuation">(</span>sysdate<span class="token punctuation">,</span><span class="token string">&#39;day&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment">--星期二</span>
       to_char<span class="token punctuation">(</span>sysdate<span class="token punctuation">,</span><span class="token string">&#39;dy&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>   <span class="token comment">--星期二</span>
       to_char<span class="token punctuation">(</span>sysdate<span class="token punctuation">,</span><span class="token string">&#39;am&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token comment">--下午</span>
       to_char<span class="token punctuation">(</span>sysdate<span class="token punctuation">,</span><span class="token string">&#39;yyyy-mm-dd hh24:mi:ss day am&#39;</span><span class="token punctuation">)</span><span class="token comment">--2019-08-20 15:59:08 星期二 下午</span>
<span class="token keyword">from</span> dual<span class="token punctuation">;</span>

<span class="token comment">--TO_CHAR 用于数值型  数值 -&gt; 字符</span>
<span class="token comment">--        注意：进行数字类型到字符型转换时，格式中的宽度一定要超过实际列宽度，否则会显示为###。 </span>
<span class="token keyword">select</span> to_char<span class="token punctuation">(</span><span class="token number">123.456</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>   <span class="token comment">--123.456</span>
<span class="token keyword">select</span> to_char<span class="token punctuation">(</span><span class="token number">123456789.125456</span><span class="token punctuation">,</span><span class="token string">&#39;$999,999,999.99&#39;</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span><span class="token comment">--$123,456,789.13</span>
<span class="token keyword">select</span> to_char<span class="token punctuation">(</span><span class="token number">123456789.125456</span><span class="token punctuation">,</span><span class="token string">&#39;L999,999,999.99&#39;</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span><span class="token comment">--￥123,456,789.13</span>

<span class="token keyword">select</span> to_char<span class="token punctuation">(</span><span class="token number">123456789.125456</span><span class="token punctuation">,</span><span class="token string">&#39;L0999,999,999,999.99&#39;</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span><span class="token comment">--￥0000,123,456,789.13</span>

<span class="token keyword">select</span> to_char<span class="token punctuation">(</span><span class="token number">123456789.125456</span><span class="token punctuation">,</span><span class="token string">&#39;L999,999.99&#39;</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span><span class="token comment">--#####################</span>

<span class="token comment">--to_number 字符 -&gt; 数值</span>
<span class="token keyword">select</span> <span class="token string">&#39;123.456&#39;</span> <span class="token operator">+</span> <span class="token number">100</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>  <span class="token comment">--223.456</span>
<span class="token keyword">select</span> to_number<span class="token punctuation">(</span><span class="token string">&#39;123.456&#39;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">100</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span><span class="token comment">--223.456</span>

<span class="token keyword">select</span> <span class="token string">&#39;123.456abc&#39;</span> <span class="token operator">+</span> <span class="token number">100</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>  <span class="token comment">--not ok 无效数字</span>
<span class="token keyword">select</span> to_number<span class="token punctuation">(</span><span class="token string">&#39;123.456abc&#39;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">100</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span><span class="token comment">--not ok 无效数字</span>

<span class="token comment">--to_date 字符 -&gt; 日期</span>
<span class="token keyword">select</span> to_date<span class="token punctuation">(</span><span class="token string">&#39;1-1月-81&#39;</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span><span class="token comment">--OK</span>

<span class="token keyword">select</span> to_date<span class="token punctuation">(</span><span class="token string">&#39;1995-10-19&#39;</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span><span class="token comment">--not ok 文字与格式字符串不匹配</span>
<span class="token keyword">select</span> to_date<span class="token punctuation">(</span><span class="token string">&#39;1995-10-19 12:24:48&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;yyyy-mm-dd hh24:mi:ss&#39;</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>  <span class="token comment">--1995/10/19 12:24:48</span>

<span class="token keyword">select</span> to_date<span class="token punctuation">(</span><span class="token string">&#39;1995/10/19 12:24:48&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;yyyy/mm/dd hh24:mi:ss&#39;</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>  <span class="token comment">--1995/10/19 12:24:48</span>

<span class="token keyword">select</span> to_date<span class="token punctuation">(</span><span class="token string">&#39;1995年10月19日 12:24:48&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;yyyy&quot;年&quot;mm&quot;月&quot;dd&quot;日&quot; hh24:mi:ss&#39;</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>  <span class="token comment">--1995/10/19 12:24:48</span>

<span class="token comment">--------------------------------------------------------------------------</span>
<span class="token comment">-- 通用函数</span>
<span class="token comment">--------------------------------------------------------------------------</span>
<span class="token comment">--nvl(参数一，参数二)  判断参数一是否为null,如果为null,取参数二的值，反之，取参数一本身的值</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>comm<span class="token punctuation">,</span>nvl<span class="token punctuation">(</span>comm<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>

<span class="token comment">--nvl2(参数一，参数二，参数三) 判断参数一是否为null，如果为null，取参数三的值，反之，取参数二的值</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>comm<span class="token punctuation">,</span>nvl2<span class="token punctuation">(</span>comm<span class="token punctuation">,</span><span class="token string">&#39;奖金不为空&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;奖金为空&#39;</span><span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>

<span class="token comment">--nullif(参数一，参数二) 判断参数一==参数二，如果相等，返回null，如果不相等，返回参数一的值</span>
<span class="token keyword">select</span> <span class="token keyword">nullif</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span> <span class="token comment">--null</span>
<span class="token keyword">select</span> <span class="token keyword">nullif</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span> <span class="token comment">--10</span>
<span class="token keyword">select</span> <span class="token keyword">nullif</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span> <span class="token comment">--20</span>

<span class="token comment">--coalesce(参数一，参数二................参数N):判断参数一是否为null,如果为null,判断参数二的值，不为null，取其值，为null，继续判断参数三.........</span>
<span class="token keyword">select</span> comm<span class="token punctuation">,</span><span class="token keyword">coalesce</span><span class="token punctuation">(</span>comm<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
<span class="token keyword">select</span> comm<span class="token punctuation">,</span><span class="token keyword">coalesce</span><span class="token punctuation">(</span>comm<span class="token punctuation">,</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token boolean">null</span><span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>

<span class="token comment">--case....when....then...else....end ,类似于 if(){...}else if(){...}else{....}  条件判断函数</span>
<span class="token keyword">select</span> empno<span class="token punctuation">,</span>ename<span class="token punctuation">,</span>deptno<span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token keyword">case</span> deptno
           <span class="token keyword">when</span> <span class="token number">10</span> <span class="token keyword">then</span> <span class="token string">&#39;开发部&#39;</span>
           <span class="token keyword">when</span> <span class="token number">20</span> <span class="token keyword">then</span> <span class="token string">&#39;测试部&#39;</span>
           <span class="token keyword">when</span> <span class="token number">30</span> <span class="token keyword">then</span> <span class="token string">&#39;实施部&#39;</span>
           <span class="token keyword">else</span> <span class="token string">&#39;打杂部&#39;</span>
       <span class="token keyword">end</span><span class="token punctuation">)</span>
 <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
 
 <span class="token keyword">select</span> empno<span class="token punctuation">,</span>ename<span class="token punctuation">,</span>deptno<span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token keyword">case</span>
           <span class="token keyword">when</span> deptno<span class="token operator">=</span><span class="token number">10</span> <span class="token keyword">then</span> <span class="token string">&#39;开发部&#39;</span>
           <span class="token keyword">when</span> deptno<span class="token operator">=</span><span class="token number">20</span> <span class="token keyword">then</span> <span class="token string">&#39;测试部&#39;</span>
           <span class="token keyword">when</span> deptno<span class="token operator">=</span><span class="token number">30</span> <span class="token keyword">then</span> <span class="token string">&#39;实施部&#39;</span>
           <span class="token keyword">else</span> <span class="token string">&#39;打杂部&#39;</span>
       <span class="token keyword">end</span><span class="token punctuation">)</span>
 <span class="token keyword">from</span> emp<span class="token punctuation">;</span>


<span class="token comment">--decode() 条件判断函数</span>
<span class="token keyword">select</span> empno<span class="token punctuation">,</span>ename<span class="token punctuation">,</span>deptno<span class="token punctuation">,</span>decode<span class="token punctuation">(</span>deptno<span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">&#39;开发部&#39;</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token string">&#39;测试部&#39;</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token string">&#39;实施部&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;打杂部&#39;</span><span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>


<span class="token comment">--------------------------------------------------------------------------</span>
<span class="token comment">-- 函数嵌套：单行函数可以嵌套N层</span>
<span class="token comment">--------------------------------------------------------------------------</span>
<span class="token number">1.</span>查询员工信息，没有经理的人员显示<span class="token string">&quot;最大的BOSS&quot;</span>
<span class="token keyword">select</span> empno<span class="token punctuation">,</span>ename<span class="token punctuation">,</span>mgr<span class="token punctuation">,</span>nvl<span class="token punctuation">(</span>mgr<span class="token punctuation">,</span><span class="token string">&#39;最大的BOSS&#39;</span><span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span><span class="token comment">--无效数字  nvl中仅允许存放同类型数据</span>
<span class="token keyword">select</span> empno<span class="token punctuation">,</span>ename<span class="token punctuation">,</span>mgr<span class="token punctuation">,</span>lower<span class="token punctuation">(</span>nvl<span class="token punctuation">(</span>to_char<span class="token punctuation">(</span>mgr<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&#39;最大的BOSS&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>

<span class="token comment">--练习</span>
<span class="token number">7.</span>在员工表中查询出员工的工资，并计算应交税款：
如果工资小于<span class="token number">1000</span><span class="token punctuation">,</span>税率为<span class="token number">0</span>，
如果工资大于等于<span class="token number">1000</span>并小于<span class="token number">2000</span>，税率为<span class="token number">10</span>％，
如果工资大于等于<span class="token number">2000</span>并小于<span class="token number">3000</span>，税率为<span class="token number">15</span>％，
如果工资大于等于<span class="token number">3000</span>，税率为<span class="token number">20</span>％。
<span class="token comment">--方式一</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal<span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token keyword">case</span>
           <span class="token keyword">when</span> sal <span class="token operator">&lt;</span> <span class="token number">1000</span> <span class="token keyword">then</span> <span class="token number">0</span>
           <span class="token keyword">when</span> sal<span class="token operator">&gt;=</span><span class="token number">1000</span> <span class="token operator">and</span> sal<span class="token operator">&lt;</span><span class="token number">2000</span> <span class="token keyword">then</span> sal<span class="token operator">*</span><span class="token number">0.1</span>
           <span class="token keyword">when</span> sal<span class="token operator">&gt;=</span><span class="token number">2000</span> <span class="token operator">and</span> sal<span class="token operator">&lt;</span><span class="token number">3000</span> <span class="token keyword">then</span> sal<span class="token operator">*</span><span class="token number">0.15</span>
           <span class="token keyword">else</span> sal<span class="token operator">*</span><span class="token number">0.2</span>
       <span class="token keyword">end</span><span class="token punctuation">)</span> 应缴税款
 <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
 
<span class="token comment">--方式二</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal<span class="token punctuation">,</span>
     <span class="token punctuation">(</span><span class="token keyword">case</span> trunc<span class="token punctuation">(</span>sal<span class="token operator">/</span><span class="token number">1000</span><span class="token punctuation">)</span>
         <span class="token keyword">when</span> <span class="token number">0</span> <span class="token keyword">then</span> <span class="token number">0</span>
         <span class="token keyword">when</span> <span class="token number">1</span> <span class="token operator">and</span> sal<span class="token operator">&lt;</span><span class="token number">2000</span> <span class="token keyword">then</span> sal<span class="token operator">*</span><span class="token number">0.1</span>
         <span class="token keyword">when</span> <span class="token number">2</span> <span class="token operator">and</span> sal<span class="token operator">&lt;</span><span class="token number">3000</span> <span class="token keyword">then</span> sal<span class="token operator">*</span><span class="token number">0.15</span>
         <span class="token keyword">else</span> sal<span class="token operator">*</span><span class="token number">0.2</span>
     <span class="token keyword">end</span><span class="token punctuation">)</span> 应缴税款
<span class="token keyword">from</span> emp<span class="token punctuation">;</span>


<span class="token comment">--方式三</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal<span class="token punctuation">,</span>trunc<span class="token punctuation">(</span>sal<span class="token operator">/</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">,</span>decode<span class="token punctuation">(</span>trunc<span class="token punctuation">(</span>sal<span class="token operator">/</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>sal<span class="token operator">*</span><span class="token number">0.1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span>sal<span class="token operator">*</span><span class="token number">0.15</span><span class="token punctuation">,</span>sal<span class="token operator">*</span><span class="token number">0.2</span><span class="token punctuation">)</span>应缴税款 <span class="token keyword">from</span> emp<span class="token punctuation">;</span>


<span class="token comment">--抽取一个日期的年份</span>
<span class="token keyword">select</span> hiredate<span class="token punctuation">,</span>to_char<span class="token punctuation">(</span>hiredate<span class="token punctuation">)</span><span class="token punctuation">,</span>substr<span class="token punctuation">(</span>hiredate<span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span><span class="token comment">--80</span>
<span class="token keyword">select</span> to_char<span class="token punctuation">(</span>hiredate<span class="token punctuation">,</span><span class="token string">&#39;yyyy&#39;</span><span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>   <span class="token comment">--1981</span>
<span class="token keyword">select</span> extract<span class="token punctuation">(</span><span class="token keyword">year</span> <span class="token keyword">from</span> hiredate<span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span><span class="token comment">--1981</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>以上就是我关于 <em>Oracle-SQL开发 ---- 单行函数</em> 知识点的整理与总结的全部内容，希望对你有帮助。。。。。。。</strong></p><hr><h4 id="分割线" tabindex="-1"><a class="header-anchor" href="#分割线" aria-hidden="true">#</a> 分割线</h4><hr><h4 id="扩展知识" tabindex="-1"><a class="header-anchor" href="#扩展知识" aria-hidden="true">#</a> 扩展知识</h4><hr><p>分割线</p><hr><p><strong>博主为咯学编程：父母不同意学编程，现已断绝关系;恋人不同意学编程，现已分手;亲戚不同意学编程，现已断绝来往;老板不同意学编程,现已失业三十年。。。。。。如果此博文有帮到你欢迎打赏，金额不限。。。</strong></p>`,17);function b(y,w){const a=u("ExternalLinkIcon");return e(),t("div",null,[o(" more "),n("h1",r,[d,s(" 50-Oracle-SQL开发 ---- "),n("a",m,[s("单行函数.md"),c(a)])]),v])}const h=p(k,[["render",b],["__file","oracle50.html.vue"]]);export{h as default};
